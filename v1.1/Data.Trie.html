<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Trie</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Trie, basic type and operations</a>
<a id="141" class="Comment">------------------------------------------------------------------------</a>

<a id="215" class="Symbol">{-#</a> <a id="219" class="Keyword">OPTIONS</a> <a id="227" class="Pragma">--without-K</a> <a id="239" class="Pragma">--safe</a> <a id="246" class="Pragma">--sized-types</a> <a id="260" class="Symbol">#-}</a>

<a id="265" class="Keyword">open</a> <a id="270" class="Keyword">import</a> <a id="277" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="293" class="Keyword">using</a> <a id="299" class="Symbol">(</a><a id="300" href="Relation.Binary.Core.html#1071" class="Function">Rel</a><a id="303" class="Symbol">;</a> <a id="305" href="Relation.Binary.html#11493" class="Record">StrictTotalOrder</a><a id="321" class="Symbol">)</a>

<a id="324" class="Keyword">module</a> <a id="331" href="Data.Trie.html" class="Module">Data.Trie</a> <a id="341" class="Symbol">{</a><a id="342" href="Data.Trie.html#342" class="Bound">k</a> <a id="344" href="Data.Trie.html#344" class="Bound">e</a> <a id="346" href="Data.Trie.html#346" class="Bound">r</a><a id="347" class="Symbol">}</a> <a id="349" class="Symbol">(</a><a id="350" href="Data.Trie.html#350" class="Bound">S</a> <a id="352" class="Symbol">:</a> <a id="354" href="Relation.Binary.html#11493" class="Record">StrictTotalOrder</a> <a id="371" href="Data.Trie.html#342" class="Bound">k</a> <a id="373" href="Data.Trie.html#344" class="Bound">e</a> <a id="375" href="Data.Trie.html#346" class="Bound">r</a><a id="376" class="Symbol">)</a> <a id="378" class="Keyword">where</a>

<a id="385" class="Keyword">open</a> <a id="390" class="Keyword">import</a> <a id="397" href="Level.html" class="Module">Level</a>
<a id="403" class="Keyword">open</a> <a id="408" class="Keyword">import</a> <a id="415" href="Size.html" class="Module">Size</a>
<a id="420" class="Keyword">open</a> <a id="425" class="Keyword">import</a> <a id="432" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="447" class="Keyword">using</a> <a id="453" class="Symbol">(</a><a id="454" href="Agda.Builtin.List.html#121" class="Datatype">List</a><a id="458" class="Symbol">;</a> <a id="460" href="Data.List.Base.html#8786" class="InductiveConstructor">[]</a><a id="462" class="Symbol">;</a> <a id="464" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">_∷_</a><a id="467" class="Symbol">;</a> <a id="469" href="Data.List.Base.html#1570" class="Function Operator">_++_</a><a id="473" class="Symbol">)</a>
<a id="475" class="Keyword">import</a> <a id="482" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="501" class="Symbol">as</a> <a id="504" class="Module">List⁺</a>
<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="538" class="Symbol">as</a> <a id="541" class="Module">Maybe</a> <a id="547" class="Keyword">using</a> <a id="553" class="Symbol">(</a><a id="554" href="Data.Maybe.Base.html#795" class="Datatype">Maybe</a><a id="559" class="Symbol">;</a> <a id="561" href="Data.Maybe.Base.html#829" class="InductiveConstructor">just</a><a id="565" class="Symbol">;</a> <a id="567" href="Data.Maybe.Base.html#859" class="InductiveConstructor">nothing</a><a id="574" class="Symbol">;</a> <a id="576" href="Data.Maybe.Base.html#1494" class="Function">maybe′</a><a id="582" class="Symbol">)</a>
<a id="584" class="Keyword">open</a> <a id="589" class="Keyword">import</a> <a id="596" href="Data.Product.html" class="Module">Data.Product</a> <a id="609" class="Symbol">as</a> <a id="612" class="Module">Prod</a> <a id="617" class="Keyword">using</a> <a id="623" class="Symbol">(</a><a id="624" href="Data.Product.html#1364" class="Function">∃</a><a id="625" class="Symbol">)</a>
<a id="627" class="Keyword">open</a> <a id="632" class="Keyword">import</a> <a id="639" href="Data.These.html" class="Module">Data.These</a> <a id="650" class="Symbol">as</a> <a id="653" class="Module">These</a> <a id="659" class="Keyword">using</a> <a id="665" class="Symbol">(</a><a id="666" href="Data.These.Base.html#523" class="Datatype">These</a><a id="671" class="Symbol">)</a>
<a id="673" class="Keyword">open</a> <a id="678" class="Keyword">import</a> <a id="685" href="Function.html" class="Module">Function</a>
<a id="694" class="Keyword">open</a> <a id="699" class="Keyword">import</a> <a id="706" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="721" class="Keyword">using</a> <a id="727" class="Symbol">(</a><a id="728" href="Relation.Unary.html#3297" class="Function">IUniversal</a><a id="738" class="Symbol">;</a> <a id="740" href="Relation.Unary.html#4103" class="Function Operator">_⇒_</a><a id="743" class="Symbol">)</a>

<a id="746" class="Keyword">open</a> <a id="751" href="Relation.Binary.html#11493" class="Module">StrictTotalOrder</a> <a id="768" href="Data.Trie.html#350" class="Bound">S</a>
  <a id="772" class="Keyword">using</a> <a id="778" class="Symbol">(</a><a id="779" class="Keyword">module</a> Eq<a id="788" class="Symbol">)</a>
  <a id="792" class="Keyword">renaming</a> <a id="801" class="Symbol">(</a>Carrier <a id="810" class="Symbol">to</a> Key<a id="816" class="Symbol">)</a>

<a id="819" class="Keyword">open</a> <a id="824" class="Keyword">import</a> <a id="831" href="Data.List.Relation.Binary.Equality.Setoid.html" class="Module">Data.List.Relation.Binary.Equality.Setoid</a> <a id="873" href="Relation.Binary.html#3037" class="Function">Eq.setoid</a>
<a id="883" class="Keyword">open</a> <a id="888" class="Keyword">import</a> <a id="895" href="Data.AVL.Value.html" class="Module">Data.AVL.Value</a> <a id="910" href="Data.List.Relation.Binary.Equality.Setoid.html#1545" class="Function">≋-setoid</a> <a id="919" class="Keyword">using</a> <a id="925" class="Symbol">(</a>Value<a id="931" class="Symbol">)</a>

<a id="934" class="Comment">------------------------------------------------------------------------</a>
<a id="1007" class="Comment">-- Definition</a>

<a id="1022" class="Comment">-- Trie is defined in terms of Trie⁺, the type of non-empty trie. This</a>
<a id="1093" class="Comment">-- guarantees that the trie is minimal: each path in the tree leads to</a>
<a id="1164" class="Comment">-- either a value or a number of non-empty sub-tries.</a>

<a id="1219" class="Keyword">open</a> <a id="1224" class="Keyword">import</a> <a id="1231" href="Data.Trie.NonEmpty.html" class="Module">Data.Trie.NonEmpty</a> <a id="1250" href="Data.Trie.html#350" class="Bound">S</a> <a id="1252" class="Symbol">as</a> <a id="Trie⁺"></a><a id="1255" href="Data.Trie.html#1255" class="Module">Trie⁺</a> <a id="1261" class="Keyword">public</a>
  <a id="1270" class="Keyword">using</a> <a id="1276" class="Symbol">(</a><a id="1277" href="Data.Trie.NonEmpty.html#1754" class="Datatype">Trie⁺</a><a id="1282" class="Symbol">;</a> <a id="1284" href="Data.Trie.NonEmpty.html#1807" class="Function">Tries⁺</a><a id="1290" class="Symbol">;</a> <a id="1292" href="Data.Trie.NonEmpty.html#1587" class="Function">Word</a><a id="1296" class="Symbol">;</a> <a id="1298" href="Data.Trie.NonEmpty.html#1617" class="Function">eat</a><a id="1301" class="Symbol">)</a>

<a id="Trie"></a><a id="1304" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="1309" class="Symbol">:</a> <a id="1311" class="Symbol">∀</a> <a id="1313" class="Symbol">{</a><a id="1314" href="Data.Trie.html#1314" class="Bound">v</a><a id="1315" class="Symbol">}</a> <a id="1317" class="Symbol">(</a><a id="1318" href="Data.Trie.html#1318" class="Bound">V</a> <a id="1320" class="Symbol">:</a> <a id="1322" href="Data.AVL.Value.html#509" class="Record">Value</a> <a id="1328" href="Data.Trie.html#1314" class="Bound">v</a><a id="1329" class="Symbol">)</a> <a id="1331" class="Symbol">→</a> <a id="1333" href="Agda.Builtin.Size.html#179" class="Postulate">Size</a> <a id="1338" class="Symbol">→</a> <a id="1340" class="PrimitiveType">Set</a> <a id="1344" class="Symbol">(</a><a id="1345" href="Data.Trie.html#1314" class="Bound">v</a> <a id="1347" href="Agda.Primitive.html#621" class="Primitive Operator">⊔</a> <a id="1349" href="Data.Trie.html#342" class="Bound">k</a> <a id="1351" href="Agda.Primitive.html#621" class="Primitive Operator">⊔</a> <a id="1353" href="Data.Trie.html#344" class="Bound">e</a> <a id="1355" href="Agda.Primitive.html#621" class="Primitive Operator">⊔</a> <a id="1357" href="Data.Trie.html#346" class="Bound">r</a><a id="1358" class="Symbol">)</a>
<a id="1360" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="1365" href="Data.Trie.html#1365" class="Bound">V</a> <a id="1367" href="Data.Trie.html#1367" class="Bound">i</a> <a id="1369" class="Symbol">=</a> <a id="1371" href="Data.Maybe.Base.html#795" class="Datatype">Maybe</a> <a id="1377" class="Symbol">(</a><a id="1378" href="Data.Trie.NonEmpty.html#1754" class="Datatype">Trie⁺</a> <a id="1384" href="Data.Trie.html#1365" class="Bound">V</a> <a id="1386" href="Data.Trie.html#1367" class="Bound">i</a><a id="1387" class="Symbol">)</a>

<a id="1390" class="Comment">------------------------------------------------------------------------</a>
<a id="1463" class="Comment">-- Operations</a>

<a id="1478" class="Comment">-- Functions acting on Trie are wrappers for functions acting on Tries.</a>
<a id="1550" class="Comment">-- Sometimes the empty case is handled in a special way (e.g. insertWith</a>
<a id="1623" class="Comment">-- calls singleton when faced with an empty Trie).</a>

<a id="1675" class="Keyword">module</a> <a id="1682" href="Data.Trie.html#1682" class="Module">_</a> <a id="1684" class="Symbol">{</a><a id="1685" href="Data.Trie.html#1685" class="Bound">v</a><a id="1686" class="Symbol">}</a> <a id="1688" class="Symbol">{</a><a id="1689" href="Data.Trie.html#1689" class="Bound">V</a> <a id="1691" class="Symbol">:</a> <a id="1693" href="Data.AVL.Value.html#509" class="Record">Value</a> <a id="1699" href="Data.Trie.html#1685" class="Bound">v</a><a id="1700" class="Symbol">}</a> <a id="1702" class="Keyword">where</a>

  <a id="1711" class="Keyword">private</a> <a id="1719" href="Data.Trie.html#1719" class="Function">Val</a> <a id="1723" class="Symbol">=</a> <a id="1725" href="Data.AVL.Value.html#579" class="Field">Value.family</a> <a id="1738" href="Data.Trie.html#1689" class="Bound">V</a>

<a id="1741" class="Comment">------------------------------------------------------------------------</a>
<a id="1814" class="Comment">-- Lookup</a>

  <a id="1827" href="Data.Trie.html#1827" class="Function">lookup</a> <a id="1834" class="Symbol">:</a> <a id="1836" class="Symbol">∀</a> <a id="1838" href="Data.Trie.html#1838" class="Bound">ks</a> <a id="1841" class="Symbol">→</a> <a id="1843" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="1848" href="Data.Trie.html#1689" class="Bound">V</a> <a id="1850" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="1852" class="Symbol">→</a> <a id="1854" href="Data.Maybe.Base.html#795" class="Datatype">Maybe</a> <a id="1860" class="Symbol">(</a><a id="1861" href="Data.These.Base.html#523" class="Datatype">These</a> <a id="1867" class="Symbol">(</a><a id="1868" href="Data.Trie.html#1719" class="Function">Val</a> <a id="1872" href="Data.Trie.html#1838" class="Bound">ks</a><a id="1874" class="Symbol">)</a> <a id="1876" class="Symbol">(</a><a id="1877" href="Data.Trie.NonEmpty.html#1807" class="Function">Tries⁺</a> <a id="1884" class="Symbol">(</a><a id="1885" href="Data.Trie.NonEmpty.html#1617" class="Function">eat</a> <a id="1889" href="Data.Trie.html#1689" class="Bound">V</a> <a id="1891" href="Data.Trie.html#1838" class="Bound">ks</a><a id="1893" class="Symbol">)</a> <a id="1895" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="1896" class="Symbol">))</a>
  <a id="1901" href="Data.Trie.html#1827" class="Function">lookup</a> <a id="1908" href="Data.Trie.html#1908" class="Bound">ks</a> <a id="1911" href="Data.Trie.html#1911" class="Bound">t</a> <a id="1913" class="Symbol">=</a> <a id="1915" href="Data.Trie.html#1911" class="Bound">t</a> <a id="1917" href="Data.Maybe.Base.html#2167" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="1927" href="Data.Trie.NonEmpty.html#2342" class="Function">Trie⁺.lookup</a> <a id="1940" href="Data.Trie.html#1908" class="Bound">ks</a>

  <a id="1946" href="Data.Trie.html#1946" class="Function">lookupValue</a> <a id="1958" class="Symbol">:</a> <a id="1960" class="Symbol">∀</a> <a id="1962" href="Data.Trie.html#1962" class="Bound">ks</a> <a id="1965" class="Symbol">→</a> <a id="1967" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="1972" href="Data.Trie.html#1689" class="Bound">V</a> <a id="1974" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="1976" class="Symbol">→</a> <a id="1978" href="Data.Maybe.Base.html#795" class="Datatype">Maybe</a> <a id="1984" class="Symbol">(</a><a id="1985" href="Data.Trie.html#1719" class="Function">Val</a> <a id="1989" href="Data.Trie.html#1962" class="Bound">ks</a><a id="1991" class="Symbol">)</a>
  <a id="1995" href="Data.Trie.html#1946" class="Function">lookupValue</a> <a id="2007" href="Data.Trie.html#2007" class="Bound">ks</a> <a id="2010" href="Data.Trie.html#2010" class="Bound">t</a> <a id="2012" class="Symbol">=</a> <a id="2014" href="Data.Trie.html#2010" class="Bound">t</a> <a id="2016" href="Data.Maybe.Base.html#2167" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2026" href="Data.Trie.NonEmpty.html#2661" class="Function">Trie⁺.lookupValue</a> <a id="2044" href="Data.Trie.html#2007" class="Bound">ks</a>

  <a id="2050" href="Data.Trie.html#2050" class="Function">lookupTries⁺</a> <a id="2063" class="Symbol">:</a> <a id="2065" class="Symbol">∀</a> <a id="2067" href="Data.Trie.html#2067" class="Bound">ks</a> <a id="2070" class="Symbol">→</a> <a id="2072" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2077" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2079" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2081" class="Symbol">→</a> <a id="2083" href="Data.Maybe.Base.html#795" class="Datatype">Maybe</a> <a id="2089" class="Symbol">(</a><a id="2090" href="Data.Trie.NonEmpty.html#1807" class="Function">Tries⁺</a> <a id="2097" class="Symbol">(</a><a id="2098" href="Data.Trie.NonEmpty.html#1617" class="Function">eat</a> <a id="2102" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2104" href="Data.Trie.html#2067" class="Bound">ks</a><a id="2106" class="Symbol">)</a> <a id="2108" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a><a id="2109" class="Symbol">)</a>
  <a id="2113" href="Data.Trie.html#2050" class="Function">lookupTries⁺</a> <a id="2126" href="Data.Trie.html#2126" class="Bound">ks</a> <a id="2129" href="Data.Trie.html#2129" class="Bound">t</a> <a id="2131" class="Symbol">=</a> <a id="2133" href="Data.Trie.html#2129" class="Bound">t</a> <a id="2135" href="Data.Maybe.Base.html#2167" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2145" href="Data.Trie.NonEmpty.html#2784" class="Function">Trie⁺.lookupTries⁺</a> <a id="2164" href="Data.Trie.html#2126" class="Bound">ks</a>

  <a id="2170" href="Data.Trie.html#2170" class="Function">lookupTrie</a> <a id="2181" class="Symbol">:</a> <a id="2183" class="Symbol">∀</a> <a id="2185" href="Data.Trie.html#2185" class="Bound">k</a> <a id="2187" class="Symbol">→</a> <a id="2189" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2194" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2196" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2198" class="Symbol">→</a> <a id="2200" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2205" class="Symbol">(</a><a id="2206" href="Data.Trie.NonEmpty.html#1617" class="Function">eat</a> <a id="2210" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2212" class="Symbol">(</a><a id="2213" href="Data.Trie.html#2185" class="Bound">k</a> <a id="2215" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2217" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a><a id="2219" class="Symbol">))</a> <a id="2222" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a>
  <a id="2226" href="Data.Trie.html#2170" class="Function">lookupTrie</a> <a id="2237" href="Data.Trie.html#2237" class="Bound">k</a> <a id="2239" href="Data.Trie.html#2239" class="Bound">t</a> <a id="2241" class="Symbol">=</a> <a id="2243" href="Data.Trie.html#2239" class="Bound">t</a> <a id="2245" href="Data.Maybe.Base.html#2167" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2255" href="Data.Trie.NonEmpty.html#2908" class="Function">Trie⁺.lookupTrie⁺</a> <a id="2273" href="Data.Trie.html#2237" class="Bound">k</a>

<a id="2276" class="Comment">------------------------------------------------------------------------</a>
<a id="2349" class="Comment">-- Construction</a>

  <a id="2368" href="Data.Trie.html#2368" class="Function">empty</a> <a id="2374" class="Symbol">:</a> <a id="2376" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2381" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2383" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a>
  <a id="2387" href="Data.Trie.html#2368" class="Function">empty</a> <a id="2393" class="Symbol">=</a> <a id="2395" href="Data.Maybe.Base.html#859" class="InductiveConstructor">nothing</a>

  <a id="2406" href="Data.Trie.html#2406" class="Function">singleton</a> <a id="2416" class="Symbol">:</a> <a id="2418" class="Symbol">∀</a> <a id="2420" href="Data.Trie.html#2420" class="Bound">ks</a> <a id="2423" class="Symbol">→</a> <a id="2425" href="Data.Trie.html#1719" class="Function">Val</a> <a id="2429" href="Data.Trie.html#2420" class="Bound">ks</a> <a id="2432" class="Symbol">→</a> <a id="2434" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2439" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2441" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a>
  <a id="2445" href="Data.Trie.html#2406" class="Function">singleton</a> <a id="2455" href="Data.Trie.html#2455" class="Bound">ks</a> <a id="2458" href="Data.Trie.html#2458" class="Bound">v</a> <a id="2460" class="Symbol">=</a> <a id="2462" href="Data.Maybe.Base.html#829" class="InductiveConstructor">just</a> <a id="2467" class="Symbol">(</a><a id="2468" href="Data.Trie.NonEmpty.html#3127" class="Function">Trie⁺.singleton</a> <a id="2484" href="Data.Trie.html#2455" class="Bound">ks</a> <a id="2487" href="Data.Trie.html#2458" class="Bound">v</a><a id="2488" class="Symbol">)</a>

  <a id="2493" href="Data.Trie.html#2493" class="Function">insertWith</a> <a id="2504" class="Symbol">:</a> <a id="2506" class="Symbol">∀</a> <a id="2508" href="Data.Trie.html#2508" class="Bound">ks</a> <a id="2511" class="Symbol">→</a> <a id="2513" class="Symbol">(</a><a id="2514" href="Data.Maybe.Base.html#795" class="Datatype">Maybe</a> <a id="2520" class="Symbol">(</a><a id="2521" href="Data.Trie.html#1719" class="Function">Val</a> <a id="2525" href="Data.Trie.html#2508" class="Bound">ks</a><a id="2527" class="Symbol">)</a> <a id="2529" class="Symbol">→</a> <a id="2531" href="Data.Trie.html#1719" class="Function">Val</a> <a id="2535" href="Data.Trie.html#2508" class="Bound">ks</a><a id="2537" class="Symbol">)</a> <a id="2539" class="Symbol">→</a> <a id="2541" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2546" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2548" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2550" class="Symbol">→</a> <a id="2552" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2557" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2559" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a>
  <a id="2563" href="Data.Trie.html#2493" class="Function">insertWith</a> <a id="2574" href="Data.Trie.html#2574" class="Bound">ks</a> <a id="2577" href="Data.Trie.html#2577" class="Bound">f</a> <a id="2579" class="Symbol">(</a><a id="2580" href="Data.Maybe.Base.html#829" class="InductiveConstructor">just</a> <a id="2585" href="Data.Trie.html#2585" class="Bound">t</a><a id="2586" class="Symbol">)</a> <a id="2588" class="Symbol">=</a> <a id="2590" href="Data.Maybe.Base.html#829" class="InductiveConstructor">just</a> <a id="2595" class="Symbol">(</a><a id="2596" href="Data.Trie.NonEmpty.html#3298" class="Function">Trie⁺.insertWith</a> <a id="2613" href="Data.Trie.html#2574" class="Bound">ks</a> <a id="2616" href="Data.Trie.html#2577" class="Bound">f</a> <a id="2618" href="Data.Trie.html#2585" class="Bound">t</a><a id="2619" class="Symbol">)</a>
  <a id="2623" href="Data.Trie.html#2493" class="Function">insertWith</a> <a id="2634" href="Data.Trie.html#2634" class="Bound">ks</a> <a id="2637" href="Data.Trie.html#2637" class="Bound">f</a> <a id="2639" href="Data.Maybe.Base.html#859" class="InductiveConstructor">nothing</a>  <a id="2648" class="Symbol">=</a> <a id="2650" href="Data.Trie.html#2406" class="Function">singleton</a> <a id="2660" href="Data.Trie.html#2634" class="Bound">ks</a> <a id="2663" class="Symbol">(</a><a id="2664" href="Data.Trie.html#2637" class="Bound">f</a> <a id="2666" href="Data.Maybe.Base.html#859" class="InductiveConstructor">nothing</a><a id="2673" class="Symbol">)</a>

  <a id="2678" href="Data.Trie.html#2678" class="Function">insert</a> <a id="2685" class="Symbol">:</a> <a id="2687" class="Symbol">∀</a> <a id="2689" href="Data.Trie.html#2689" class="Bound">ks</a> <a id="2692" class="Symbol">→</a> <a id="2694" href="Data.Trie.html#1719" class="Function">Val</a> <a id="2698" href="Data.Trie.html#2689" class="Bound">ks</a> <a id="2701" class="Symbol">→</a> <a id="2703" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2708" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2710" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2712" class="Symbol">→</a> <a id="2714" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2719" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2721" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a>
  <a id="2725" href="Data.Trie.html#2678" class="Function">insert</a> <a id="2732" href="Data.Trie.html#2732" class="Bound">ks</a> <a id="2735" class="Symbol">=</a> <a id="2737" href="Data.Trie.html#2493" class="Function">insertWith</a> <a id="2748" href="Data.Trie.html#2732" class="Bound">ks</a> <a id="2751" href="Function.html#3311" class="Function Operator">∘′</a> <a id="2754" href="Function.html#729" class="Function">const</a>

  <a id="2763" href="Data.Trie.html#2763" class="Function">fromList</a> <a id="2772" class="Symbol">:</a> <a id="2774" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2779" class="Symbol">(</a><a id="2780" href="Data.Product.html#1364" class="Function">∃</a> <a id="2782" href="Data.Trie.html#1719" class="Function">Val</a><a id="2785" class="Symbol">)</a> <a id="2787" class="Symbol">→</a> <a id="2789" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2794" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2796" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a>
  <a id="2800" href="Data.Trie.html#2763" class="Function">fromList</a> <a id="2809" class="Symbol">=</a> <a id="2811" href="Data.Maybe.Base.html#1960" class="Function">Maybe.map</a> <a id="2821" href="Data.Trie.NonEmpty.html#4026" class="Function">Trie⁺.fromList⁺</a> <a id="2837" href="Function.html#3311" class="Function Operator">∘′</a> <a id="2840" href="Data.List.NonEmpty.html#1762" class="Function">List⁺.fromList</a>

  <a id="2858" href="Data.Trie.html#2858" class="Function">toList</a> <a id="2865" class="Symbol">:</a> <a id="2867" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="2872" href="Data.Trie.html#1689" class="Bound">V</a> <a id="2874" href="Agda.Builtin.Size.html#275" class="Postulate">∞</a> <a id="2876" class="Symbol">→</a> <a id="2878" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2883" class="Symbol">(</a><a id="2884" href="Data.Product.html#1364" class="Function">∃</a> <a id="2886" href="Data.Trie.html#1719" class="Function">Val</a><a id="2889" class="Symbol">)</a>
  <a id="2893" href="Data.Trie.html#2858" class="Function">toList</a> <a id="2900" class="Symbol">(</a><a id="2901" href="Data.Maybe.Base.html#829" class="InductiveConstructor">just</a> <a id="2906" href="Data.Trie.html#2906" class="Bound">t</a><a id="2907" class="Symbol">)</a> <a id="2909" class="Symbol">=</a> <a id="2911" href="Data.List.NonEmpty.html#1706" class="Function">List⁺.toList</a> <a id="2924" class="Symbol">(</a><a id="2925" href="Data.Trie.NonEmpty.html#4128" class="Function">Trie⁺.toList⁺</a> <a id="2939" href="Data.Trie.html#2906" class="Bound">t</a><a id="2940" class="Symbol">)</a>
  <a id="2944" href="Data.Trie.html#2858" class="Function">toList</a> <a id="2951" href="Data.Maybe.Base.html#859" class="InductiveConstructor">nothing</a>  <a id="2960" class="Symbol">=</a> <a id="2962" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a>

<a id="2966" class="Comment">------------------------------------------------------------------------</a>
<a id="3039" class="Comment">-- Modification</a>

<a id="3056" class="Keyword">module</a> <a id="3063" href="Data.Trie.html#3063" class="Module">_</a> <a id="3065" class="Symbol">{</a><a id="3066" href="Data.Trie.html#3066" class="Bound">v</a> <a id="3068" href="Data.Trie.html#3068" class="Bound">w</a><a id="3069" class="Symbol">}</a> <a id="3071" class="Symbol">{</a><a id="3072" href="Data.Trie.html#3072" class="Bound">V</a> <a id="3074" class="Symbol">:</a> <a id="3076" href="Data.AVL.Value.html#509" class="Record">Value</a> <a id="3082" href="Data.Trie.html#3066" class="Bound">v</a><a id="3083" class="Symbol">}</a> <a id="3085" class="Symbol">{</a><a id="3086" href="Data.Trie.html#3086" class="Bound">W</a> <a id="3088" class="Symbol">:</a> <a id="3090" href="Data.AVL.Value.html#509" class="Record">Value</a> <a id="3096" href="Data.Trie.html#3068" class="Bound">w</a><a id="3097" class="Symbol">}</a> <a id="3099" class="Keyword">where</a>

  <a id="3108" class="Keyword">private</a>
    <a id="3120" href="Data.Trie.html#3120" class="Function">Val</a> <a id="3124" class="Symbol">=</a> <a id="3126" href="Data.AVL.Value.html#579" class="Field">Value.family</a> <a id="3139" href="Data.Trie.html#3072" class="Bound">V</a>
    <a id="3145" href="Data.Trie.html#3145" class="Function">Wal</a> <a id="3149" class="Symbol">=</a> <a id="3151" href="Data.AVL.Value.html#579" class="Field">Value.family</a> <a id="3164" href="Data.Trie.html#3086" class="Bound">W</a>

  <a id="3169" href="Data.Trie.html#3169" class="Function">map</a> <a id="3173" class="Symbol">:</a> <a id="3175" class="Symbol">∀</a> <a id="3177" class="Symbol">{</a><a id="3178" href="Data.Trie.html#3178" class="Bound">i</a><a id="3179" class="Symbol">}</a> <a id="3181" class="Symbol">→</a> <a id="3183" href="Relation.Unary.html#3297" class="Function">∀[</a> <a id="3186" href="Data.Trie.html#3120" class="Function">Val</a> <a id="3190" href="Relation.Unary.html#4103" class="Function Operator">⇒</a> <a id="3192" href="Data.Trie.html#3145" class="Function">Wal</a> <a id="3196" href="Relation.Unary.html#3297" class="Function">]</a> <a id="3198" class="Symbol">→</a> <a id="3200" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3205" href="Data.Trie.html#3072" class="Bound">V</a> <a id="3207" href="Data.Trie.html#3178" class="Bound">i</a> <a id="3209" class="Symbol">→</a> <a id="3211" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3216" href="Data.Trie.html#3086" class="Bound">W</a> <a id="3218" href="Data.Trie.html#3178" class="Bound">i</a>
  <a id="3222" href="Data.Trie.html#3169" class="Function">map</a> <a id="3226" class="Symbol">=</a> <a id="3228" href="Data.Maybe.Base.html#1960" class="Function">Maybe.map</a> <a id="3238" href="Function.html#3311" class="Function Operator">∘′</a> <a id="3241" href="Data.Trie.NonEmpty.html#1870" class="Function">Trie⁺.map</a> <a id="3251" href="Data.Trie.html#3072" class="Bound">V</a> <a id="3253" href="Data.Trie.html#3086" class="Bound">W</a>

<a id="3256" class="Comment">-- Deletion</a>

<a id="3269" class="Keyword">module</a> <a id="3276" href="Data.Trie.html#3276" class="Module">_</a> <a id="3278" class="Symbol">{</a><a id="3279" href="Data.Trie.html#3279" class="Bound">v</a><a id="3280" class="Symbol">}</a> <a id="3282" class="Symbol">{</a><a id="3283" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3285" class="Symbol">:</a> <a id="3287" href="Data.AVL.Value.html#509" class="Record">Value</a> <a id="3293" href="Data.Trie.html#3279" class="Bound">v</a><a id="3294" class="Symbol">}</a> <a id="3296" class="Keyword">where</a>

  <a id="3305" class="Comment">-- Use a function to decide how to modify the sub-Trie⁺ whose root is</a>
<a id="3375" class="Bound"> </a> <a id="3377" class="Comment">--</a><a id="3379" class="Comment"> a</a><a id="3381" class="Comment">t</a><a id="3382" class="Comment"> </a><a id="3383" class="Comment">t</a><a id="3384" class="Comment">h</a><a id="3385" class="Comment">e end of path ks.</a>
  <a id="3405" href="Data.Trie.html#3405" class="Function">deleteWith</a> <a id="3416" class="Symbol">:</a> <a id="3418" class="Symbol">∀</a> <a id="3420" class="Symbol">{</a><a id="3421" href="Data.Trie.html#3421" class="Bound">i</a><a id="3422" class="Symbol">}</a> <a id="3424" class="Symbol">(</a><a id="3425" href="Data.Trie.html#3425" class="Bound">ks</a> <a id="3428" class="Symbol">:</a> <a id="3430" href="Data.Trie.NonEmpty.html#1587" class="Function">Word</a><a id="3434" class="Symbol">)</a> <a id="3436" class="Symbol">→</a>
     <a id="3443" class="Symbol">(∀</a> <a id="3446" class="Symbol">{</a><a id="3447" href="Data.Trie.html#3447" class="Bound">i</a><a id="3448" class="Symbol">}</a> <a id="3450" class="Symbol">→</a> <a id="3452" href="Data.Trie.NonEmpty.html#1754" class="Datatype">Trie⁺</a> <a id="3458" class="Symbol">(</a><a id="3459" href="Data.Trie.NonEmpty.html#1617" class="Function">eat</a> <a id="3463" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3465" href="Data.Trie.html#3425" class="Bound">ks</a><a id="3467" class="Symbol">)</a> <a id="3469" href="Data.Trie.html#3447" class="Bound">i</a> <a id="3471" class="Symbol">→</a> <a id="3473" href="Data.Maybe.Base.html#795" class="Datatype">Maybe</a> <a id="3479" class="Symbol">(</a><a id="3480" href="Data.Trie.NonEmpty.html#1754" class="Datatype">Trie⁺</a> <a id="3486" class="Symbol">(</a><a id="3487" href="Data.Trie.NonEmpty.html#1617" class="Function">eat</a> <a id="3491" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3493" href="Data.Trie.html#3425" class="Bound">ks</a><a id="3495" class="Symbol">)</a> <a id="3497" href="Data.Trie.html#3447" class="Bound">i</a><a id="3498" class="Symbol">))</a> <a id="3501" class="Symbol">→</a>
     <a id="3508" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3513" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3515" href="Data.Trie.html#3421" class="Bound">i</a> <a id="3517" class="Symbol">→</a> <a id="3519" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3524" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3526" href="Data.Trie.html#3421" class="Bound">i</a>
  <a id="3530" href="Data.Trie.html#3405" class="Function">deleteWith</a> <a id="3541" href="Data.Trie.html#3541" class="Bound">ks</a> <a id="3544" href="Data.Trie.html#3544" class="Bound">f</a> <a id="3546" href="Data.Trie.html#3546" class="Bound">t</a> <a id="3548" class="Symbol">=</a> <a id="3550" href="Data.Trie.html#3546" class="Bound">t</a> <a id="3552" href="Data.Maybe.Base.html#2167" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="3562" href="Data.Trie.NonEmpty.html#4584" class="Function">Trie⁺.deleteWith</a> <a id="3579" href="Data.Trie.html#3541" class="Bound">ks</a> <a id="3582" href="Data.Trie.html#3544" class="Bound">f</a>

  <a id="3587" class="Comment">-- Remove the whole node</a>
  <a id="3614" href="Data.Trie.html#3614" class="Function">deleteTrie⁺</a> <a id="3626" class="Symbol">:</a> <a id="3628" class="Symbol">∀</a> <a id="3630" class="Symbol">{</a><a id="3631" href="Data.Trie.html#3631" class="Bound">i</a><a id="3632" class="Symbol">}</a> <a id="3634" class="Symbol">(</a><a id="3635" href="Data.Trie.html#3635" class="Bound">ks</a> <a id="3638" class="Symbol">:</a> <a id="3640" href="Data.Trie.NonEmpty.html#1587" class="Function">Word</a><a id="3644" class="Symbol">)</a> <a id="3646" class="Symbol">→</a> <a id="3648" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3653" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3655" href="Data.Trie.html#3631" class="Bound">i</a> <a id="3657" class="Symbol">→</a> <a id="3659" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3664" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3666" href="Data.Trie.html#3631" class="Bound">i</a>
  <a id="3670" href="Data.Trie.html#3614" class="Function">deleteTrie⁺</a> <a id="3682" href="Data.Trie.html#3682" class="Bound">ks</a> <a id="3685" href="Data.Trie.html#3685" class="Bound">t</a> <a id="3687" class="Symbol">=</a> <a id="3689" href="Data.Trie.html#3685" class="Bound">t</a> <a id="3691" href="Data.Maybe.Base.html#2167" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="3701" href="Data.Trie.NonEmpty.html#5423" class="Function">Trie⁺.deleteTrie⁺</a> <a id="3719" href="Data.Trie.html#3682" class="Bound">ks</a>

  <a id="3725" class="Comment">-- Remove the value and keep the sub-Tries (if any)</a>
  <a id="3779" href="Data.Trie.html#3779" class="Function">deleteValue</a> <a id="3791" class="Symbol">:</a> <a id="3793" class="Symbol">∀</a> <a id="3795" class="Symbol">{</a><a id="3796" href="Data.Trie.html#3796" class="Bound">i</a><a id="3797" class="Symbol">}</a> <a id="3799" class="Symbol">(</a><a id="3800" href="Data.Trie.html#3800" class="Bound">ks</a> <a id="3803" class="Symbol">:</a> <a id="3805" href="Data.Trie.NonEmpty.html#1587" class="Function">Word</a><a id="3809" class="Symbol">)</a> <a id="3811" class="Symbol">→</a> <a id="3813" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3818" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3820" href="Data.Trie.html#3796" class="Bound">i</a> <a id="3822" class="Symbol">→</a> <a id="3824" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3829" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3831" href="Data.Trie.html#3796" class="Bound">i</a>
  <a id="3835" href="Data.Trie.html#3779" class="Function">deleteValue</a> <a id="3847" href="Data.Trie.html#3847" class="Bound">ks</a> <a id="3850" href="Data.Trie.html#3850" class="Bound">t</a> <a id="3852" class="Symbol">=</a> <a id="3854" href="Data.Trie.html#3850" class="Bound">t</a> <a id="3856" href="Data.Maybe.Base.html#2167" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="3866" href="Data.Trie.NonEmpty.html#5541" class="Function">Trie⁺.deleteValue</a> <a id="3884" href="Data.Trie.html#3847" class="Bound">ks</a>

  <a id="3890" class="Comment">-- Remove the sub-Tries and keep the value (if any)</a>
  <a id="3944" href="Data.Trie.html#3944" class="Function">deleteTries⁺</a> <a id="3957" class="Symbol">:</a> <a id="3959" class="Symbol">∀</a> <a id="3961" class="Symbol">{</a><a id="3962" href="Data.Trie.html#3962" class="Bound">i</a><a id="3963" class="Symbol">}</a> <a id="3965" class="Symbol">(</a><a id="3966" href="Data.Trie.html#3966" class="Bound">ks</a> <a id="3969" class="Symbol">:</a> <a id="3971" href="Data.Trie.NonEmpty.html#1587" class="Function">Word</a><a id="3975" class="Symbol">)</a> <a id="3977" class="Symbol">→</a> <a id="3979" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3984" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3986" href="Data.Trie.html#3962" class="Bound">i</a> <a id="3988" class="Symbol">→</a> <a id="3990" href="Data.Trie.html#1304" class="Function">Trie</a> <a id="3995" href="Data.Trie.html#3283" class="Bound">V</a> <a id="3997" href="Data.Trie.html#3962" class="Bound">i</a>
  <a id="4001" href="Data.Trie.html#3944" class="Function">deleteTries⁺</a> <a id="4014" href="Data.Trie.html#4014" class="Bound">ks</a> <a id="4017" href="Data.Trie.html#4017" class="Bound">t</a> <a id="4019" class="Symbol">=</a> <a id="4021" href="Data.Trie.html#4017" class="Bound">t</a> <a id="4023" href="Data.Maybe.Base.html#2167" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="4033" href="Data.Trie.NonEmpty.html#5705" class="Function">Trie⁺.deleteTries⁺</a> <a id="4052" href="Data.Trie.html#4014" class="Bound">ks</a>
</pre></body></html>