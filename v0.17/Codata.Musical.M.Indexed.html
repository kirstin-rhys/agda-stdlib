<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Musical.M.Indexed</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Indexed M-types (the dual of indexed W-types aka Petersson-Synek</a>
<a id="174" class="Comment">-- trees).</a>
<a id="185" class="Comment">------------------------------------------------------------------------</a>

<a id="259" class="Keyword">module</a> <a id="266" href="Codata.Musical.M.Indexed.html" class="Module">Codata.Musical.M.Indexed</a> <a id="291" class="Keyword">where</a>

<a id="298" class="Keyword">open</a> <a id="303" class="Keyword">import</a> <a id="310" href="Level.html" class="Module">Level</a>
<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Codata.Musical.Notation.html" class="Module">Codata.Musical.Notation</a>
<a id="352" class="Keyword">open</a> <a id="357" class="Keyword">import</a> <a id="364" href="Data.Product.html" class="Module">Data.Product</a>
<a id="377" class="Keyword">open</a> <a id="382" class="Keyword">import</a> <a id="389" href="Data.Container.Indexed.Core.html" class="Module">Data.Container.Indexed.Core</a>
<a id="417" class="Keyword">open</a> <a id="422" class="Keyword">import</a> <a id="429" href="Function.html" class="Module">Function</a>
<a id="438" class="Keyword">open</a> <a id="443" class="Keyword">import</a> <a id="450" href="Relation.Unary.html" class="Module">Relation.Unary</a>

<a id="466" class="Comment">-- The family of indexed M-types.</a>

<a id="501" class="Keyword">module</a> <a id="508" href="Codata.Musical.M.Indexed.html#508" class="Module">_</a> <a id="510" class="Symbol">{</a><a id="511" href="Codata.Musical.M.Indexed.html#511" class="Bound">ℓ</a> <a id="513" href="Codata.Musical.M.Indexed.html#513" class="Bound">c</a> <a id="515" href="Codata.Musical.M.Indexed.html#515" class="Bound">r</a><a id="516" class="Symbol">}</a> <a id="518" class="Symbol">{</a><a id="519" href="Codata.Musical.M.Indexed.html#519" class="Bound">O</a> <a id="521" class="Symbol">:</a> <a id="523" class="PrimitiveType">Set</a> <a id="527" href="Codata.Musical.M.Indexed.html#511" class="Bound">ℓ</a><a id="528" class="Symbol">}</a> <a id="530" class="Symbol">(</a><a id="531" href="Codata.Musical.M.Indexed.html#531" class="Bound">C</a> <a id="533" class="Symbol">:</a> <a id="535" href="Data.Container.Indexed.Core.html#342" class="Record">Container</a> <a id="545" href="Codata.Musical.M.Indexed.html#519" class="Bound">O</a> <a id="547" href="Codata.Musical.M.Indexed.html#519" class="Bound">O</a> <a id="549" href="Codata.Musical.M.Indexed.html#513" class="Bound">c</a> <a id="551" href="Codata.Musical.M.Indexed.html#515" class="Bound">r</a><a id="552" class="Symbol">)</a> <a id="554" class="Keyword">where</a>

  <a id="563" class="Keyword">data</a> <a id="568" href="Codata.Musical.M.Indexed.html#568" class="Datatype">M</a> <a id="570" class="Symbol">(</a><a id="571" href="Codata.Musical.M.Indexed.html#571" class="Bound">o</a> <a id="573" class="Symbol">:</a> <a id="575" href="Codata.Musical.M.Indexed.html#519" class="Bound">O</a><a id="576" class="Symbol">)</a> <a id="578" class="Symbol">:</a> <a id="580" class="PrimitiveType">Set</a> <a id="584" class="Symbol">(</a><a id="585" href="Codata.Musical.M.Indexed.html#511" class="Bound">ℓ</a> <a id="587" href="Agda.Primitive.html#657" class="Primitive Operator">⊔</a> <a id="589" href="Codata.Musical.M.Indexed.html#513" class="Bound">c</a> <a id="591" href="Agda.Primitive.html#657" class="Primitive Operator">⊔</a> <a id="593" href="Codata.Musical.M.Indexed.html#515" class="Bound">r</a><a id="594" class="Symbol">)</a> <a id="596" class="Keyword">where</a>
    <a id="606" href="Codata.Musical.M.Indexed.html#606" class="InductiveConstructor">inf</a> <a id="610" class="Symbol">:</a> <a id="612" href="Data.Container.Indexed.Core.html#661" class="Function Operator">⟦</a> <a id="614" href="Codata.Musical.M.Indexed.html#531" class="Bound">C</a> <a id="616" href="Data.Container.Indexed.Core.html#661" class="Function Operator">⟧</a> <a id="618" class="Symbol">(</a><a id="619" href="Agda.Builtin.Coinduction.html#105" class="Record">∞</a> <a id="621" href="Function.html#769" class="Function Operator">∘</a> <a id="623" href="Codata.Musical.M.Indexed.html#568" class="Datatype">M</a><a id="624" class="Symbol">)</a> <a id="626" href="Codata.Musical.M.Indexed.html#571" class="Bound">o</a> <a id="628" class="Symbol">→</a> <a id="630" href="Codata.Musical.M.Indexed.html#568" class="Datatype">M</a> <a id="632" href="Codata.Musical.M.Indexed.html#571" class="Bound">o</a>

  <a id="637" class="Keyword">open</a> <a id="642" href="Data.Container.Indexed.Core.html#342" class="Module">Container</a> <a id="652" href="Codata.Musical.M.Indexed.html#531" class="Bound">C</a>

  <a id="657" class="Comment">-- Projections.</a>

  <a id="676" href="Codata.Musical.M.Indexed.html#676" class="Function">head</a> <a id="681" class="Symbol">:</a> <a id="683" href="Codata.Musical.M.Indexed.html#568" class="Datatype">M</a> <a id="685" href="Relation.Unary.html#1475" class="Function Operator">⊆</a> <a id="687" href="Data.Container.Indexed.Core.html#481" class="Field">Command</a>
  <a id="697" href="Codata.Musical.M.Indexed.html#676" class="Function">head</a> <a id="702" class="Symbol">(</a><a id="703" href="Codata.Musical.M.Indexed.html#606" class="InductiveConstructor">inf</a> <a id="707" class="Symbol">(</a><a id="708" href="Codata.Musical.M.Indexed.html#708" class="Bound">c</a> <a id="710" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="712" class="Symbol">_))</a> <a id="716" class="Symbol">=</a> <a id="718" href="Codata.Musical.M.Indexed.html#708" class="Bound">c</a>

  <a id="723" href="Codata.Musical.M.Indexed.html#723" class="Function">tail</a> <a id="728" class="Symbol">:</a> <a id="730" class="Symbol">∀</a> <a id="732" class="Symbol">{</a><a id="733" href="Codata.Musical.M.Indexed.html#733" class="Bound">o</a><a id="734" class="Symbol">}</a> <a id="736" class="Symbol">(</a><a id="737" href="Codata.Musical.M.Indexed.html#737" class="Bound">m</a> <a id="739" class="Symbol">:</a> <a id="741" href="Codata.Musical.M.Indexed.html#568" class="Datatype">M</a> <a id="743" href="Codata.Musical.M.Indexed.html#733" class="Bound">o</a><a id="744" class="Symbol">)</a> <a id="746" class="Symbol">(</a><a id="747" href="Codata.Musical.M.Indexed.html#747" class="Bound">r</a> <a id="749" class="Symbol">:</a> <a id="751" href="Data.Container.Indexed.Core.html#512" class="Field">Response</a> <a id="760" class="Symbol">(</a><a id="761" href="Codata.Musical.M.Indexed.html#676" class="Function">head</a> <a id="766" href="Codata.Musical.M.Indexed.html#737" class="Bound">m</a><a id="767" class="Symbol">))</a> <a id="770" class="Symbol">→</a> <a id="772" href="Codata.Musical.M.Indexed.html#568" class="Datatype">M</a> <a id="774" class="Symbol">(</a><a id="775" href="Data.Container.Indexed.Core.html#553" class="Field">next</a> <a id="780" class="Symbol">(</a><a id="781" href="Codata.Musical.M.Indexed.html#676" class="Function">head</a> <a id="786" href="Codata.Musical.M.Indexed.html#737" class="Bound">m</a><a id="787" class="Symbol">)</a> <a id="789" href="Codata.Musical.M.Indexed.html#747" class="Bound">r</a><a id="790" class="Symbol">)</a>
  <a id="794" href="Codata.Musical.M.Indexed.html#723" class="Function">tail</a> <a id="799" class="Symbol">(</a><a id="800" href="Codata.Musical.M.Indexed.html#606" class="InductiveConstructor">inf</a> <a id="804" class="Symbol">(_</a> <a id="807" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="809" href="Codata.Musical.M.Indexed.html#809" class="Bound">k</a><a id="810" class="Symbol">))</a> <a id="813" href="Codata.Musical.M.Indexed.html#813" class="Bound">r</a> <a id="815" class="Symbol">=</a> <a id="817" href="Agda.Builtin.Coinduction.html#161" class="Field">♭</a> <a id="819" class="Symbol">(</a><a id="820" href="Codata.Musical.M.Indexed.html#809" class="Bound">k</a> <a id="822" href="Codata.Musical.M.Indexed.html#813" class="Bound">r</a><a id="823" class="Symbol">)</a>

  <a id="828" href="Codata.Musical.M.Indexed.html#828" class="Function">force</a> <a id="834" class="Symbol">:</a> <a id="836" href="Codata.Musical.M.Indexed.html#568" class="Datatype">M</a> <a id="838" href="Relation.Unary.html#1475" class="Function Operator">⊆</a> <a id="840" href="Data.Container.Indexed.Core.html#661" class="Function Operator">⟦</a> <a id="842" href="Codata.Musical.M.Indexed.html#531" class="Bound">C</a> <a id="844" href="Data.Container.Indexed.Core.html#661" class="Function Operator">⟧</a> <a id="846" href="Codata.Musical.M.Indexed.html#568" class="Datatype">M</a>
  <a id="850" href="Codata.Musical.M.Indexed.html#828" class="Function">force</a> <a id="856" class="Symbol">(</a><a id="857" href="Codata.Musical.M.Indexed.html#606" class="InductiveConstructor">inf</a> <a id="861" class="Symbol">(</a><a id="862" href="Codata.Musical.M.Indexed.html#862" class="Bound">c</a> <a id="864" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="866" href="Codata.Musical.M.Indexed.html#866" class="Bound">k</a><a id="867" class="Symbol">))</a> <a id="870" class="Symbol">=</a> <a id="872" href="Codata.Musical.M.Indexed.html#862" class="Bound">c</a> <a id="874" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="876" class="Symbol">λ</a> <a id="878" href="Codata.Musical.M.Indexed.html#878" class="Bound">r</a> <a id="880" class="Symbol">→</a> <a id="882" href="Agda.Builtin.Coinduction.html#161" class="Field">♭</a> <a id="884" class="Symbol">(</a><a id="885" href="Codata.Musical.M.Indexed.html#866" class="Bound">k</a> <a id="887" href="Codata.Musical.M.Indexed.html#878" class="Bound">r</a><a id="888" class="Symbol">)</a>

  <a id="893" class="Comment">-- Coiteration.</a>

  <a id="912" href="Codata.Musical.M.Indexed.html#912" class="Function">coit</a> <a id="917" class="Symbol">:</a> <a id="919" class="Symbol">∀</a> <a id="921" class="Symbol">{</a><a id="922" href="Codata.Musical.M.Indexed.html#922" class="Bound">ℓ</a><a id="923" class="Symbol">}</a> <a id="925" class="Symbol">{</a><a id="926" href="Codata.Musical.M.Indexed.html#926" class="Bound">X</a> <a id="928" class="Symbol">:</a> <a id="930" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="935" href="Codata.Musical.M.Indexed.html#519" class="Bound">O</a> <a id="937" href="Codata.Musical.M.Indexed.html#922" class="Bound">ℓ</a><a id="938" class="Symbol">}</a> <a id="940" class="Symbol">→</a> <a id="942" href="Codata.Musical.M.Indexed.html#926" class="Bound">X</a> <a id="944" href="Relation.Unary.html#1475" class="Function Operator">⊆</a> <a id="946" href="Data.Container.Indexed.Core.html#661" class="Function Operator">⟦</a> <a id="948" href="Codata.Musical.M.Indexed.html#531" class="Bound">C</a> <a id="950" href="Data.Container.Indexed.Core.html#661" class="Function Operator">⟧</a> <a id="952" href="Codata.Musical.M.Indexed.html#926" class="Bound">X</a> <a id="954" class="Symbol">→</a> <a id="956" href="Codata.Musical.M.Indexed.html#926" class="Bound">X</a> <a id="958" href="Relation.Unary.html#1475" class="Function Operator">⊆</a> <a id="960" href="Codata.Musical.M.Indexed.html#568" class="Datatype">M</a>
  <a id="964" href="Codata.Musical.M.Indexed.html#912" class="Function">coit</a> <a id="969" href="Codata.Musical.M.Indexed.html#969" class="Bound">ψ</a> <a id="971" href="Codata.Musical.M.Indexed.html#971" class="Bound">x</a> <a id="973" class="Symbol">=</a> <a id="975" href="Codata.Musical.M.Indexed.html#606" class="InductiveConstructor">inf</a> <a id="979" class="Symbol">(</a><a id="980" href="Agda.Builtin.Sigma.html#155" class="Field">proj₁</a> <a id="986" href="Codata.Musical.M.Indexed.html#1034" class="Function">cs</a> <a id="989" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="991" class="Symbol">λ</a> <a id="993" href="Codata.Musical.M.Indexed.html#993" class="Bound">r</a> <a id="995" class="Symbol">→</a> <a id="997" href="Agda.Builtin.Coinduction.html#133" class="CoinductiveConstructor Operator">♯</a> <a id="999" href="Codata.Musical.M.Indexed.html#912" class="Function">coit</a> <a id="1004" href="Codata.Musical.M.Indexed.html#969" class="Bound">ψ</a> <a id="1006" class="Symbol">(</a><a id="1007" href="Agda.Builtin.Sigma.html#167" class="Field">proj₂</a> <a id="1013" href="Codata.Musical.M.Indexed.html#1034" class="Function">cs</a> <a id="1016" href="Codata.Musical.M.Indexed.html#993" class="Bound">r</a><a id="1017" class="Symbol">))</a>
    <a id="1024" class="Keyword">where</a>
    <a id="1034" href="Codata.Musical.M.Indexed.html#1034" class="Function">cs</a> <a id="1037" class="Symbol">=</a> <a id="1039" href="Codata.Musical.M.Indexed.html#969" class="Bound">ψ</a> <a id="1041" href="Codata.Musical.M.Indexed.html#971" class="Bound">x</a>
</pre></body></html>