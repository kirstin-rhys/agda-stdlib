<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Fin.Substitution</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Substitutions</a>
<a id="123" class="Comment">------------------------------------------------------------------------</a>

<a id="197" class="Comment">-- Uses a variant of Conor McBride&#39;s technique from &quot;Type-Preserving</a>
<a id="266" class="Comment">-- Renaming and Substitution&quot;.</a>

<a id="298" class="Comment">-- See Data.Fin.Substitution.Example for an example of how this module</a>
<a id="369" class="Comment">-- can be used: a definition of substitution for the untyped</a>
<a id="430" class="Comment">-- λ-calculus.</a>

<a id="446" class="Keyword">module</a> <a id="453" href="Data.Fin.Substitution.html" class="Module">Data.Fin.Substitution</a> <a id="475" class="Keyword">where</a>

<a id="482" class="Keyword">open</a> <a id="487" class="Keyword">import</a> <a id="494" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="503" class="Keyword">hiding</a> <a id="510" class="Symbol">(</a><a id="511" href="Data.Nat.Base.html#1549" class="Function Operator">_⊔_</a><a id="514" class="Symbol">)</a>
<a id="516" class="Keyword">open</a> <a id="521" class="Keyword">import</a> <a id="528" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="537" class="Keyword">using</a> <a id="543" class="Symbol">(</a><a id="544" href="Data.Fin.Base.html#915" class="Datatype">Fin</a><a id="547" class="Symbol">;</a> <a id="549" href="Data.Fin.Base.html#937" class="InductiveConstructor">zero</a><a id="553" class="Symbol">;</a> <a id="555" href="Data.Fin.Base.html#968" class="InductiveConstructor">suc</a><a id="558" class="Symbol">)</a>
<a id="560" class="Keyword">open</a> <a id="565" class="Keyword">import</a> <a id="572" href="Data.Vec.html" class="Module">Data.Vec</a>
<a id="581" class="Keyword">open</a> <a id="586" class="Keyword">import</a> <a id="593" href="Function.html" class="Module">Function</a> <a id="602" class="Symbol">as</a> <a id="605" class="Module">Fun</a> <a id="609" class="Keyword">using</a> <a id="615" class="Symbol">(</a><a id="616" href="Function.html#1536" class="Function">flip</a><a id="620" class="Symbol">)</a>
<a id="622" class="Keyword">open</a> <a id="627" class="Keyword">import</a> <a id="634" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a>
  <a id="690" class="Symbol">as</a> <a id="693" class="Module">Star</a> <a id="698" class="Keyword">using</a> <a id="704" class="Symbol">(</a><a id="705" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#449" class="Datatype">Star</a><a id="709" class="Symbol">;</a> <a id="711" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#510" class="InductiveConstructor">ε</a><a id="712" class="Symbol">;</a> <a id="714" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#537" class="InductiveConstructor Operator">_◅_</a><a id="717" class="Symbol">)</a>
<a id="719" class="Keyword">open</a> <a id="724" class="Keyword">import</a> <a id="731" href="Level.html" class="Module">Level</a> <a id="737" class="Keyword">using</a> <a id="743" class="Symbol">(</a><a id="744" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="749" class="Symbol">;</a> <a id="751" href="Agda.Primitive.html#657" class="Primitive Operator">_⊔_</a><a id="754" class="Symbol">)</a>
<a id="756" class="Keyword">import</a> <a id="763" href="Level.html" class="Module">Level</a> <a id="769" class="Symbol">as</a> <a id="772" class="Module">L</a>
<a id="774" class="Keyword">open</a> <a id="779" class="Keyword">import</a> <a id="786" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="801" class="Keyword">using</a> <a id="807" class="Symbol">(</a><a id="808" href="Relation.Unary.html#582" class="Function">Pred</a><a id="812" class="Symbol">)</a>

<a id="815" class="Comment">------------------------------------------------------------------------</a>
<a id="888" class="Comment">-- General functionality</a>

<a id="914" class="Comment">-- A Sub T m n is a substitution which, when applied to something with</a>
<a id="985" class="Comment">-- at most m variables, yields something with at most n variables.</a>

<a id="Sub"></a><a id="1053" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="1057" class="Symbol">:</a> <a id="1059" class="Symbol">∀</a> <a id="1061" class="Symbol">{</a><a id="1062" href="Data.Fin.Substitution.html#1062" class="Bound">ℓ</a><a id="1063" class="Symbol">}</a> <a id="1065" class="Symbol">→</a> <a id="1067" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="1072" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="1074" href="Data.Fin.Substitution.html#1062" class="Bound">ℓ</a> <a id="1076" class="Symbol">→</a> <a id="1078" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="1080" class="Symbol">→</a> <a id="1082" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="1084" class="Symbol">→</a> <a id="1086" class="PrimitiveType">Set</a> <a id="1090" href="Data.Fin.Substitution.html#1062" class="Bound">ℓ</a>
<a id="1092" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="1096" href="Data.Fin.Substitution.html#1096" class="Bound">T</a> <a id="1098" href="Data.Fin.Substitution.html#1098" class="Bound">m</a> <a id="1100" href="Data.Fin.Substitution.html#1100" class="Bound">n</a> <a id="1102" class="Symbol">=</a> <a id="1104" href="Data.Vec.html#737" class="Datatype">Vec</a> <a id="1108" class="Symbol">(</a><a id="1109" href="Data.Fin.Substitution.html#1096" class="Bound">T</a> <a id="1111" href="Data.Fin.Substitution.html#1100" class="Bound">n</a><a id="1112" class="Symbol">)</a> <a id="1114" href="Data.Fin.Substitution.html#1098" class="Bound">m</a>

<a id="1117" class="Comment">-- A /reversed/ sequence of matching substitutions.</a>

<a id="Subs"></a><a id="1170" href="Data.Fin.Substitution.html#1170" class="Function">Subs</a> <a id="1175" class="Symbol">:</a> <a id="1177" class="Symbol">∀</a> <a id="1179" class="Symbol">{</a><a id="1180" href="Data.Fin.Substitution.html#1180" class="Bound">ℓ</a><a id="1181" class="Symbol">}</a> <a id="1183" class="Symbol">→</a> <a id="1185" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="1190" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="1192" href="Data.Fin.Substitution.html#1180" class="Bound">ℓ</a> <a id="1194" class="Symbol">→</a> <a id="1196" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="1198" class="Symbol">→</a> <a id="1200" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="1202" class="Symbol">→</a> <a id="1204" class="PrimitiveType">Set</a> <a id="1208" href="Data.Fin.Substitution.html#1180" class="Bound">ℓ</a>
<a id="1210" href="Data.Fin.Substitution.html#1170" class="Function">Subs</a> <a id="1215" href="Data.Fin.Substitution.html#1215" class="Bound">T</a> <a id="1217" class="Symbol">=</a> <a id="1219" href="Function.html#1536" class="Function">flip</a> <a id="1224" class="Symbol">(</a><a id="1225" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#449" class="Datatype">Star</a> <a id="1230" class="Symbol">(</a><a id="1231" href="Function.html#1536" class="Function">flip</a> <a id="1236" class="Symbol">(</a><a id="1237" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="1241" href="Data.Fin.Substitution.html#1215" class="Bound">T</a><a id="1242" class="Symbol">)))</a>

<a id="1247" class="Comment">-- Some simple substitutions.</a>

<a id="1278" class="Keyword">record</a> <a id="Simple"></a><a id="1285" href="Data.Fin.Substitution.html#1285" class="Record">Simple</a> <a id="1292" class="Symbol">{</a><a id="1293" href="Data.Fin.Substitution.html#1293" class="Bound">ℓ</a> <a id="1295" class="Symbol">:</a> <a id="1297" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="1302" class="Symbol">}</a> <a id="1304" class="Symbol">(</a><a id="1305" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1307" class="Symbol">:</a> <a id="1309" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="1314" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="1316" href="Data.Fin.Substitution.html#1293" class="Bound">ℓ</a><a id="1317" class="Symbol">)</a> <a id="1319" class="Symbol">:</a> <a id="1321" class="PrimitiveType">Set</a> <a id="1325" href="Data.Fin.Substitution.html#1293" class="Bound">ℓ</a> <a id="1327" class="Keyword">where</a>
  <a id="1335" class="Keyword">infix</a>  <a id="1342" class="Number">10</a> <a id="1345" href="Data.Fin.Substitution.html#1514" class="Function Operator">_↑</a>
  <a id="1350" class="Keyword">infixl</a> <a id="1357" class="Number">10</a> <a id="1360" href="Data.Fin.Substitution.html#1598" class="Function Operator">_↑⋆_</a> <a id="1365" href="Data.Fin.Substitution.html#1701" class="Function Operator">_↑✶_</a>

  <a id="1373" class="Keyword">field</a>
    <a id="Simple.var"></a><a id="1383" href="Data.Fin.Substitution.html#1383" class="Field">var</a>    <a id="1390" class="Symbol">:</a> <a id="1392" class="Symbol">∀</a> <a id="1394" class="Symbol">{</a><a id="1395" href="Data.Fin.Substitution.html#1395" class="Bound">n</a><a id="1396" class="Symbol">}</a> <a id="1398" class="Symbol">→</a> <a id="1400" href="Data.Fin.Base.html#915" class="Datatype">Fin</a> <a id="1404" href="Data.Fin.Substitution.html#1395" class="Bound">n</a> <a id="1406" class="Symbol">→</a> <a id="1408" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1410" href="Data.Fin.Substitution.html#1395" class="Bound">n</a>      <a id="1417" class="Comment">-- Takes variables to Ts.</a>
    <a id="Simple.weaken"></a><a id="1447" href="Data.Fin.Substitution.html#1447" class="Field">weaken</a> <a id="1454" class="Symbol">:</a> <a id="1456" class="Symbol">∀</a> <a id="1458" class="Symbol">{</a><a id="1459" href="Data.Fin.Substitution.html#1459" class="Bound">n</a><a id="1460" class="Symbol">}</a> <a id="1462" class="Symbol">→</a> <a id="1464" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1466" href="Data.Fin.Substitution.html#1459" class="Bound">n</a> <a id="1468" class="Symbol">→</a> <a id="1470" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1472" class="Symbol">(</a><a id="1473" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="1477" href="Data.Fin.Substitution.html#1459" class="Bound">n</a><a id="1478" class="Symbol">)</a>  <a id="1481" class="Comment">-- Weakens Ts.</a>

  <a id="1499" class="Comment">-- Lifting.</a>

  <a id="Simple._↑"></a><a id="1514" href="Data.Fin.Substitution.html#1514" class="Function Operator">_↑</a> <a id="1517" class="Symbol">:</a> <a id="1519" class="Symbol">∀</a> <a id="1521" class="Symbol">{</a><a id="1522" href="Data.Fin.Substitution.html#1522" class="Bound">m</a> <a id="1524" href="Data.Fin.Substitution.html#1524" class="Bound">n</a><a id="1525" class="Symbol">}</a> <a id="1527" class="Symbol">→</a> <a id="1529" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="1533" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1535" href="Data.Fin.Substitution.html#1522" class="Bound">m</a> <a id="1537" href="Data.Fin.Substitution.html#1524" class="Bound">n</a> <a id="1539" class="Symbol">→</a> <a id="1541" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="1545" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1547" class="Symbol">(</a><a id="1548" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="1552" href="Data.Fin.Substitution.html#1522" class="Bound">m</a><a id="1553" class="Symbol">)</a> <a id="1555" class="Symbol">(</a><a id="1556" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="1560" href="Data.Fin.Substitution.html#1524" class="Bound">n</a><a id="1561" class="Symbol">)</a>
  <a id="1565" href="Data.Fin.Substitution.html#1565" class="Bound">ρ</a> <a id="1567" href="Data.Fin.Substitution.html#1514" class="Function Operator">↑</a> <a id="1569" class="Symbol">=</a> <a id="1571" href="Data.Fin.Substitution.html#1383" class="Field">var</a> <a id="1575" href="Data.Fin.Base.html#937" class="InductiveConstructor">zero</a> <a id="1580" href="Data.Vec.html#796" class="InductiveConstructor Operator">∷</a> <a id="1582" href="Data.Vec.html#2096" class="Function">map</a> <a id="1586" href="Data.Fin.Substitution.html#1447" class="Field">weaken</a> <a id="1593" href="Data.Fin.Substitution.html#1565" class="Bound">ρ</a>

  <a id="Simple._↑⋆_"></a><a id="1598" href="Data.Fin.Substitution.html#1598" class="Function Operator">_↑⋆_</a> <a id="1603" class="Symbol">:</a> <a id="1605" class="Symbol">∀</a> <a id="1607" class="Symbol">{</a><a id="1608" href="Data.Fin.Substitution.html#1608" class="Bound">m</a> <a id="1610" href="Data.Fin.Substitution.html#1610" class="Bound">n</a><a id="1611" class="Symbol">}</a> <a id="1613" class="Symbol">→</a> <a id="1615" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="1619" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1621" href="Data.Fin.Substitution.html#1608" class="Bound">m</a> <a id="1623" href="Data.Fin.Substitution.html#1610" class="Bound">n</a> <a id="1625" class="Symbol">→</a> <a id="1627" class="Symbol">∀</a> <a id="1629" href="Data.Fin.Substitution.html#1629" class="Bound">k</a> <a id="1631" class="Symbol">→</a> <a id="1633" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="1637" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1639" class="Symbol">(</a><a id="1640" href="Data.Fin.Substitution.html#1629" class="Bound">k</a> <a id="1642" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="1644" href="Data.Fin.Substitution.html#1608" class="Bound">m</a><a id="1645" class="Symbol">)</a> <a id="1647" class="Symbol">(</a><a id="1648" href="Data.Fin.Substitution.html#1629" class="Bound">k</a> <a id="1650" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="1652" href="Data.Fin.Substitution.html#1610" class="Bound">n</a><a id="1653" class="Symbol">)</a>
  <a id="1657" href="Data.Fin.Substitution.html#1657" class="Bound">ρ</a> <a id="1659" href="Data.Fin.Substitution.html#1598" class="Function Operator">↑⋆</a> <a id="1662" href="Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a>  <a id="1668" class="Symbol">=</a> <a id="1670" href="Data.Fin.Substitution.html#1657" class="Bound">ρ</a>
  <a id="1674" href="Data.Fin.Substitution.html#1674" class="Bound">ρ</a> <a id="1676" href="Data.Fin.Substitution.html#1598" class="Function Operator">↑⋆</a> <a id="1679" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="1683" href="Data.Fin.Substitution.html#1683" class="Bound">k</a> <a id="1685" class="Symbol">=</a> <a id="1687" class="Symbol">(</a><a id="1688" href="Data.Fin.Substitution.html#1674" class="Bound">ρ</a> <a id="1690" href="Data.Fin.Substitution.html#1598" class="Function Operator">↑⋆</a> <a id="1693" href="Data.Fin.Substitution.html#1683" class="Bound">k</a><a id="1694" class="Symbol">)</a> <a id="1696" href="Data.Fin.Substitution.html#1514" class="Function Operator">↑</a>

  <a id="Simple._↑✶_"></a><a id="1701" href="Data.Fin.Substitution.html#1701" class="Function Operator">_↑✶_</a> <a id="1706" class="Symbol">:</a> <a id="1708" class="Symbol">∀</a> <a id="1710" class="Symbol">{</a><a id="1711" href="Data.Fin.Substitution.html#1711" class="Bound">m</a> <a id="1713" href="Data.Fin.Substitution.html#1713" class="Bound">n</a><a id="1714" class="Symbol">}</a> <a id="1716" class="Symbol">→</a> <a id="1718" href="Data.Fin.Substitution.html#1170" class="Function">Subs</a> <a id="1723" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1725" href="Data.Fin.Substitution.html#1711" class="Bound">m</a> <a id="1727" href="Data.Fin.Substitution.html#1713" class="Bound">n</a> <a id="1729" class="Symbol">→</a> <a id="1731" class="Symbol">∀</a> <a id="1733" href="Data.Fin.Substitution.html#1733" class="Bound">k</a> <a id="1735" class="Symbol">→</a> <a id="1737" href="Data.Fin.Substitution.html#1170" class="Function">Subs</a> <a id="1742" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1744" class="Symbol">(</a><a id="1745" href="Data.Fin.Substitution.html#1733" class="Bound">k</a> <a id="1747" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="1749" href="Data.Fin.Substitution.html#1711" class="Bound">m</a><a id="1750" class="Symbol">)</a> <a id="1752" class="Symbol">(</a><a id="1753" href="Data.Fin.Substitution.html#1733" class="Bound">k</a> <a id="1755" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="1757" href="Data.Fin.Substitution.html#1713" class="Bound">n</a><a id="1758" class="Symbol">)</a>
  <a id="1762" href="Data.Fin.Substitution.html#1762" class="Bound">ρs</a> <a id="1765" href="Data.Fin.Substitution.html#1701" class="Function Operator">↑✶</a> <a id="1768" href="Data.Fin.Substitution.html#1768" class="Bound">k</a> <a id="1770" class="Symbol">=</a> <a id="1772" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1489" class="Function">Star.gmap</a> <a id="1782" class="Symbol">(</a><a id="1783" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">_+_</a> <a id="1787" href="Data.Fin.Substitution.html#1768" class="Bound">k</a><a id="1788" class="Symbol">)</a> <a id="1790" class="Symbol">(λ</a> <a id="1793" href="Data.Fin.Substitution.html#1793" class="Bound">ρ</a> <a id="1795" class="Symbol">→</a> <a id="1797" href="Data.Fin.Substitution.html#1793" class="Bound">ρ</a> <a id="1799" href="Data.Fin.Substitution.html#1598" class="Function Operator">↑⋆</a> <a id="1802" href="Data.Fin.Substitution.html#1768" class="Bound">k</a><a id="1803" class="Symbol">)</a> <a id="1805" href="Data.Fin.Substitution.html#1762" class="Bound">ρs</a>

  <a id="1811" class="Comment">-- The identity substitution.</a>

  <a id="Simple.id"></a><a id="1844" href="Data.Fin.Substitution.html#1844" class="Function">id</a> <a id="1847" class="Symbol">:</a> <a id="1849" class="Symbol">∀</a> <a id="1851" class="Symbol">{</a><a id="1852" href="Data.Fin.Substitution.html#1852" class="Bound">n</a><a id="1853" class="Symbol">}</a> <a id="1855" class="Symbol">→</a> <a id="1857" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="1861" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1863" href="Data.Fin.Substitution.html#1852" class="Bound">n</a> <a id="1865" href="Data.Fin.Substitution.html#1852" class="Bound">n</a>
  <a id="1869" href="Data.Fin.Substitution.html#1844" class="Function">id</a> <a id="1872" class="Symbol">{</a><a id="1873" href="Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a><a id="1877" class="Symbol">}</a>  <a id="1880" class="Symbol">=</a> <a id="1882" href="Data.Vec.html#777" class="InductiveConstructor">[]</a>
  <a id="1887" href="Data.Fin.Substitution.html#1844" class="Function">id</a> <a id="1890" class="Symbol">{</a><a id="1891" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="1895" href="Data.Fin.Substitution.html#1895" class="Bound">n</a><a id="1896" class="Symbol">}</a> <a id="1898" class="Symbol">=</a> <a id="1900" href="Data.Fin.Substitution.html#1844" class="Function">id</a> <a id="1903" href="Data.Fin.Substitution.html#1514" class="Function Operator">↑</a>

  <a id="1908" class="Comment">-- Weakening.</a>

  <a id="Simple.wk⋆"></a><a id="1925" href="Data.Fin.Substitution.html#1925" class="Function">wk⋆</a> <a id="1929" class="Symbol">:</a> <a id="1931" class="Symbol">∀</a> <a id="1933" href="Data.Fin.Substitution.html#1933" class="Bound">k</a> <a id="1935" class="Symbol">{</a><a id="1936" href="Data.Fin.Substitution.html#1936" class="Bound">n</a><a id="1937" class="Symbol">}</a> <a id="1939" class="Symbol">→</a> <a id="1941" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="1945" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="1947" href="Data.Fin.Substitution.html#1936" class="Bound">n</a> <a id="1949" class="Symbol">(</a><a id="1950" href="Data.Fin.Substitution.html#1933" class="Bound">k</a> <a id="1952" href="Agda.Builtin.Nat.html#230" class="Primitive Operator">+</a> <a id="1954" href="Data.Fin.Substitution.html#1936" class="Bound">n</a><a id="1955" class="Symbol">)</a>
  <a id="1959" href="Data.Fin.Substitution.html#1925" class="Function">wk⋆</a> <a id="1963" href="Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a>    <a id="1971" class="Symbol">=</a> <a id="1973" href="Data.Fin.Substitution.html#1844" class="Function">id</a>
  <a id="1978" href="Data.Fin.Substitution.html#1925" class="Function">wk⋆</a> <a id="1982" class="Symbol">(</a><a id="1983" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="1987" href="Data.Fin.Substitution.html#1987" class="Bound">k</a><a id="1988" class="Symbol">)</a> <a id="1990" class="Symbol">=</a> <a id="1992" href="Data.Vec.html#2096" class="Function">map</a> <a id="1996" href="Data.Fin.Substitution.html#1447" class="Field">weaken</a> <a id="2003" class="Symbol">(</a><a id="2004" href="Data.Fin.Substitution.html#1925" class="Function">wk⋆</a> <a id="2008" href="Data.Fin.Substitution.html#1987" class="Bound">k</a><a id="2009" class="Symbol">)</a>

  <a id="Simple.wk"></a><a id="2014" href="Data.Fin.Substitution.html#2014" class="Function">wk</a> <a id="2017" class="Symbol">:</a> <a id="2019" class="Symbol">∀</a> <a id="2021" class="Symbol">{</a><a id="2022" href="Data.Fin.Substitution.html#2022" class="Bound">n</a><a id="2023" class="Symbol">}</a> <a id="2025" class="Symbol">→</a> <a id="2027" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="2031" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="2033" href="Data.Fin.Substitution.html#2022" class="Bound">n</a> <a id="2035" class="Symbol">(</a><a id="2036" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="2040" href="Data.Fin.Substitution.html#2022" class="Bound">n</a><a id="2041" class="Symbol">)</a>
  <a id="2045" href="Data.Fin.Substitution.html#2014" class="Function">wk</a> <a id="2048" class="Symbol">=</a> <a id="2050" href="Data.Fin.Substitution.html#1925" class="Function">wk⋆</a> <a id="2054" class="Number">1</a>

  <a id="2059" class="Comment">-- A substitution which only replaces the first variable.</a>

  <a id="Simple.sub"></a><a id="2120" href="Data.Fin.Substitution.html#2120" class="Function">sub</a> <a id="2124" class="Symbol">:</a> <a id="2126" class="Symbol">∀</a> <a id="2128" class="Symbol">{</a><a id="2129" href="Data.Fin.Substitution.html#2129" class="Bound">n</a><a id="2130" class="Symbol">}</a> <a id="2132" class="Symbol">→</a> <a id="2134" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="2136" href="Data.Fin.Substitution.html#2129" class="Bound">n</a> <a id="2138" class="Symbol">→</a> <a id="2140" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="2144" href="Data.Fin.Substitution.html#1305" class="Bound">T</a> <a id="2146" class="Symbol">(</a><a id="2147" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="2151" href="Data.Fin.Substitution.html#2129" class="Bound">n</a><a id="2152" class="Symbol">)</a> <a id="2154" href="Data.Fin.Substitution.html#2129" class="Bound">n</a>
  <a id="2158" href="Data.Fin.Substitution.html#2120" class="Function">sub</a> <a id="2162" href="Data.Fin.Substitution.html#2162" class="Bound">t</a> <a id="2164" class="Symbol">=</a> <a id="2166" href="Data.Fin.Substitution.html#2162" class="Bound">t</a> <a id="2168" href="Data.Vec.html#796" class="InductiveConstructor Operator">∷</a> <a id="2170" href="Data.Fin.Substitution.html#1844" class="Function">id</a>

<a id="2174" class="Comment">-- Application of substitutions.</a>

<a id="2208" class="Keyword">record</a> <a id="Application"></a><a id="2215" href="Data.Fin.Substitution.html#2215" class="Record">Application</a> <a id="2227" class="Symbol">{</a><a id="2228" href="Data.Fin.Substitution.html#2228" class="Bound">ℓ₁</a> <a id="2231" href="Data.Fin.Substitution.html#2231" class="Bound">ℓ₂</a> <a id="2234" class="Symbol">:</a> <a id="2236" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="2241" class="Symbol">}</a> <a id="2243" class="Symbol">(</a><a id="2244" href="Data.Fin.Substitution.html#2244" class="Bound">T₁</a> <a id="2247" class="Symbol">:</a> <a id="2249" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="2254" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="2256" href="Data.Fin.Substitution.html#2228" class="Bound">ℓ₁</a><a id="2258" class="Symbol">)</a> <a id="2260" class="Symbol">(</a><a id="2261" href="Data.Fin.Substitution.html#2261" class="Bound">T₂</a> <a id="2264" class="Symbol">:</a> <a id="2266" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="2271" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="2273" href="Data.Fin.Substitution.html#2231" class="Bound">ℓ₂</a><a id="2275" class="Symbol">)</a> <a id="2277" class="Symbol">:</a>
    <a id="2283" class="PrimitiveType">Set</a> <a id="2287" class="Symbol">(</a><a id="2288" href="Data.Fin.Substitution.html#2228" class="Bound">ℓ₁</a> <a id="2291" href="Agda.Primitive.html#657" class="Primitive Operator">⊔</a> <a id="2293" href="Data.Fin.Substitution.html#2231" class="Bound">ℓ₂</a><a id="2295" class="Symbol">)</a> <a id="2297" class="Keyword">where</a>
  <a id="2305" class="Keyword">infixl</a> <a id="2312" class="Number">8</a> <a id="2314" href="Data.Fin.Substitution.html#2398" class="Field Operator">_/_</a> <a id="2318" href="Data.Fin.Substitution.html#2641" class="Function Operator">_/✶_</a>
  <a id="2325" class="Keyword">infixl</a> <a id="2332" class="Number">9</a> <a id="2334" href="Data.Fin.Substitution.html#2504" class="Function Operator">_⊙_</a>

  <a id="2341" class="Comment">-- Post-application of substitutions to things.</a>

  <a id="2392" class="Keyword">field</a> <a id="Application._/_"></a><a id="2398" href="Data.Fin.Substitution.html#2398" class="Field Operator">_/_</a> <a id="2402" class="Symbol">:</a> <a id="2404" class="Symbol">∀</a> <a id="2406" class="Symbol">{</a><a id="2407" href="Data.Fin.Substitution.html#2407" class="Bound">m</a> <a id="2409" href="Data.Fin.Substitution.html#2409" class="Bound">n</a><a id="2410" class="Symbol">}</a> <a id="2412" class="Symbol">→</a> <a id="2414" href="Data.Fin.Substitution.html#2244" class="Bound">T₁</a> <a id="2417" href="Data.Fin.Substitution.html#2407" class="Bound">m</a> <a id="2419" class="Symbol">→</a> <a id="2421" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="2425" href="Data.Fin.Substitution.html#2261" class="Bound">T₂</a> <a id="2428" href="Data.Fin.Substitution.html#2407" class="Bound">m</a> <a id="2430" href="Data.Fin.Substitution.html#2409" class="Bound">n</a> <a id="2432" class="Symbol">→</a> <a id="2434" href="Data.Fin.Substitution.html#2244" class="Bound">T₁</a> <a id="2437" href="Data.Fin.Substitution.html#2409" class="Bound">n</a>

  <a id="2442" class="Comment">-- Reverse composition. (Fits well with post-application.)</a>

  <a id="Application._⊙_"></a><a id="2504" href="Data.Fin.Substitution.html#2504" class="Function Operator">_⊙_</a> <a id="2508" class="Symbol">:</a> <a id="2510" class="Symbol">∀</a> <a id="2512" class="Symbol">{</a><a id="2513" href="Data.Fin.Substitution.html#2513" class="Bound">m</a> <a id="2515" href="Data.Fin.Substitution.html#2515" class="Bound">n</a> <a id="2517" href="Data.Fin.Substitution.html#2517" class="Bound">k</a><a id="2518" class="Symbol">}</a> <a id="2520" class="Symbol">→</a> <a id="2522" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="2526" href="Data.Fin.Substitution.html#2244" class="Bound">T₁</a> <a id="2529" href="Data.Fin.Substitution.html#2513" class="Bound">m</a> <a id="2531" href="Data.Fin.Substitution.html#2515" class="Bound">n</a> <a id="2533" class="Symbol">→</a> <a id="2535" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="2539" href="Data.Fin.Substitution.html#2261" class="Bound">T₂</a> <a id="2542" href="Data.Fin.Substitution.html#2515" class="Bound">n</a> <a id="2544" href="Data.Fin.Substitution.html#2517" class="Bound">k</a> <a id="2546" class="Symbol">→</a> <a id="2548" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="2552" href="Data.Fin.Substitution.html#2244" class="Bound">T₁</a> <a id="2555" href="Data.Fin.Substitution.html#2513" class="Bound">m</a> <a id="2557" href="Data.Fin.Substitution.html#2517" class="Bound">k</a>
  <a id="2561" href="Data.Fin.Substitution.html#2561" class="Bound">ρ₁</a> <a id="2564" href="Data.Fin.Substitution.html#2504" class="Function Operator">⊙</a> <a id="2566" href="Data.Fin.Substitution.html#2566" class="Bound">ρ₂</a> <a id="2569" class="Symbol">=</a> <a id="2571" href="Data.Vec.html#2096" class="Function">map</a> <a id="2575" class="Symbol">(λ</a> <a id="2578" href="Data.Fin.Substitution.html#2578" class="Bound">t</a> <a id="2580" class="Symbol">→</a> <a id="2582" href="Data.Fin.Substitution.html#2578" class="Bound">t</a> <a id="2584" href="Data.Fin.Substitution.html#2398" class="Field Operator">/</a> <a id="2586" href="Data.Fin.Substitution.html#2566" class="Bound">ρ₂</a><a id="2588" class="Symbol">)</a> <a id="2590" href="Data.Fin.Substitution.html#2561" class="Bound">ρ₁</a>

  <a id="2596" class="Comment">-- Application of multiple substitutions.</a>

  <a id="Application._/✶_"></a><a id="2641" href="Data.Fin.Substitution.html#2641" class="Function Operator">_/✶_</a> <a id="2646" class="Symbol">:</a> <a id="2648" class="Symbol">∀</a> <a id="2650" class="Symbol">{</a><a id="2651" href="Data.Fin.Substitution.html#2651" class="Bound">m</a> <a id="2653" href="Data.Fin.Substitution.html#2653" class="Bound">n</a><a id="2654" class="Symbol">}</a> <a id="2656" class="Symbol">→</a> <a id="2658" href="Data.Fin.Substitution.html#2244" class="Bound">T₁</a> <a id="2661" href="Data.Fin.Substitution.html#2651" class="Bound">m</a> <a id="2663" class="Symbol">→</a> <a id="2665" href="Data.Fin.Substitution.html#1170" class="Function">Subs</a> <a id="2670" href="Data.Fin.Substitution.html#2261" class="Bound">T₂</a> <a id="2673" href="Data.Fin.Substitution.html#2651" class="Bound">m</a> <a id="2675" href="Data.Fin.Substitution.html#2653" class="Bound">n</a> <a id="2677" class="Symbol">→</a> <a id="2679" href="Data.Fin.Substitution.html#2244" class="Bound">T₁</a> <a id="2682" href="Data.Fin.Substitution.html#2653" class="Bound">n</a>
  <a id="2686" href="Data.Fin.Substitution.html#2641" class="Function Operator">_/✶_</a> <a id="2691" class="Symbol">=</a> <a id="2693" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1818" class="Function">Star.gfold</a> <a id="2704" href="Function.html#1068" class="Function">Fun.id</a> <a id="2711" class="Symbol">_</a> <a id="2713" class="Symbol">(</a><a id="2714" href="Function.html#1536" class="Function">flip</a> <a id="2719" href="Data.Fin.Substitution.html#2398" class="Field Operator">_/_</a><a id="2722" class="Symbol">)</a> <a id="2724" class="Symbol">{</a><a id="2725" class="Argument">k</a> <a id="2727" class="Symbol">=</a> <a id="2729" href="Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a><a id="2733" class="Symbol">}</a>

<a id="2736" class="Comment">-- A combination of the two records above.</a>

<a id="2780" class="Keyword">record</a> <a id="Subst"></a><a id="2787" href="Data.Fin.Substitution.html#2787" class="Record">Subst</a> <a id="2793" class="Symbol">{</a><a id="2794" href="Data.Fin.Substitution.html#2794" class="Bound">ℓ</a> <a id="2796" class="Symbol">:</a> <a id="2798" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="2803" class="Symbol">}</a> <a id="2805" class="Symbol">(</a><a id="2806" href="Data.Fin.Substitution.html#2806" class="Bound">T</a> <a id="2808" class="Symbol">:</a> <a id="2810" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="2815" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="2817" href="Data.Fin.Substitution.html#2794" class="Bound">ℓ</a><a id="2818" class="Symbol">)</a> <a id="2820" class="Symbol">:</a> <a id="2822" class="PrimitiveType">Set</a> <a id="2826" href="Data.Fin.Substitution.html#2794" class="Bound">ℓ</a> <a id="2828" class="Keyword">where</a>
  <a id="2836" class="Keyword">field</a>
    <a id="Subst.simple"></a><a id="2846" href="Data.Fin.Substitution.html#2846" class="Field">simple</a>      <a id="2858" class="Symbol">:</a> <a id="2860" href="Data.Fin.Substitution.html#1285" class="Record">Simple</a>      <a id="2872" href="Data.Fin.Substitution.html#2806" class="Bound">T</a>
    <a id="Subst.application"></a><a id="2878" href="Data.Fin.Substitution.html#2878" class="Field">application</a> <a id="2890" class="Symbol">:</a> <a id="2892" href="Data.Fin.Substitution.html#2215" class="Record">Application</a> <a id="2904" href="Data.Fin.Substitution.html#2806" class="Bound">T</a> <a id="2906" href="Data.Fin.Substitution.html#2806" class="Bound">T</a>

  <a id="2911" class="Keyword">open</a> <a id="2916" href="Data.Fin.Substitution.html#1285" class="Module">Simple</a>      <a id="2928" href="Data.Fin.Substitution.html#2846" class="Field">simple</a>      <a id="2940" class="Keyword">public</a>
  <a id="2949" class="Keyword">open</a> <a id="2954" href="Data.Fin.Substitution.html#2215" class="Module">Application</a> <a id="2966" href="Data.Fin.Substitution.html#2878" class="Field">application</a> <a id="2978" class="Keyword">public</a>

  <a id="2988" class="Comment">-- Composition of multiple substitutions.</a>

  <a id="Subst.⨀"></a><a id="3033" href="Data.Fin.Substitution.html#3033" class="Function">⨀</a> <a id="3035" class="Symbol">:</a> <a id="3037" class="Symbol">∀</a> <a id="3039" class="Symbol">{</a><a id="3040" href="Data.Fin.Substitution.html#3040" class="Bound">m</a> <a id="3042" href="Data.Fin.Substitution.html#3042" class="Bound">n</a><a id="3043" class="Symbol">}</a> <a id="3045" class="Symbol">→</a> <a id="3047" href="Data.Fin.Substitution.html#1170" class="Function">Subs</a> <a id="3052" href="Data.Fin.Substitution.html#2806" class="Bound">T</a> <a id="3054" href="Data.Fin.Substitution.html#3040" class="Bound">m</a> <a id="3056" href="Data.Fin.Substitution.html#3042" class="Bound">n</a> <a id="3058" class="Symbol">→</a> <a id="3060" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="3064" href="Data.Fin.Substitution.html#2806" class="Bound">T</a> <a id="3066" href="Data.Fin.Substitution.html#3040" class="Bound">m</a> <a id="3068" href="Data.Fin.Substitution.html#3042" class="Bound">n</a>
  <a id="3072" href="Data.Fin.Substitution.html#3033" class="Function">⨀</a> <a id="3074" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#510" class="InductiveConstructor">ε</a>        <a id="3083" class="Symbol">=</a> <a id="3085" href="Data.Fin.Substitution.html#1844" class="Function">id</a>
  <a id="3090" href="Data.Fin.Substitution.html#3033" class="Function">⨀</a> <a id="3092" class="Symbol">(</a><a id="3093" href="Data.Fin.Substitution.html#3093" class="Bound">ρ</a> <a id="3095" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#537" class="InductiveConstructor Operator">◅</a> <a id="3097" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#510" class="InductiveConstructor">ε</a><a id="3098" class="Symbol">)</a>  <a id="3101" class="Symbol">=</a> <a id="3103" href="Data.Fin.Substitution.html#3093" class="Bound">ρ</a>  <a id="3106" class="Comment">-- Convenient optimisation; simplifies some proofs.</a>
  <a id="3160" href="Data.Fin.Substitution.html#3033" class="CatchallClause Function">⨀</a><a id="3161" class="CatchallClause"> </a><a id="3162" class="CatchallClause Symbol">(</a><a id="3163" href="Data.Fin.Substitution.html#3163" class="CatchallClause Bound">ρ</a><a id="3164" class="CatchallClause"> </a><a id="3165" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#537" class="CatchallClause InductiveConstructor Operator">◅</a><a id="3166" class="CatchallClause"> </a><a id="3167" href="Data.Fin.Substitution.html#3167" class="CatchallClause Bound">ρs</a><a id="3169" class="CatchallClause Symbol">)</a> <a id="3171" class="Symbol">=</a> <a id="3173" href="Data.Fin.Substitution.html#3033" class="Function">⨀</a> <a id="3175" href="Data.Fin.Substitution.html#3167" class="Bound">ρs</a> <a id="3178" href="Data.Fin.Substitution.html#2504" class="Function Operator">⊙</a> <a id="3180" href="Data.Fin.Substitution.html#3163" class="Bound">ρ</a>

<a id="3183" class="Comment">------------------------------------------------------------------------</a>
<a id="3256" class="Comment">-- Instantiations and code for facilitating instantiations</a>

<a id="3316" class="Comment">-- Liftings from T₁ to T₂.</a>

<a id="3344" class="Keyword">record</a> <a id="Lift"></a><a id="3351" href="Data.Fin.Substitution.html#3351" class="Record">Lift</a> <a id="3356" class="Symbol">{</a><a id="3357" href="Data.Fin.Substitution.html#3357" class="Bound">ℓ₁</a> <a id="3360" href="Data.Fin.Substitution.html#3360" class="Bound">ℓ₂</a> <a id="3363" class="Symbol">:</a> <a id="3365" href="Agda.Primitive.html#408" class="Postulate">Level</a><a id="3370" class="Symbol">}</a> <a id="3372" class="Symbol">(</a><a id="3373" href="Data.Fin.Substitution.html#3373" class="Bound">T₁</a> <a id="3376" class="Symbol">:</a> <a id="3378" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="3383" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="3385" href="Data.Fin.Substitution.html#3357" class="Bound">ℓ₁</a><a id="3387" class="Symbol">)</a> <a id="3389" class="Symbol">(</a><a id="3390" href="Data.Fin.Substitution.html#3390" class="Bound">T₂</a> <a id="3393" class="Symbol">:</a> <a id="3395" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="3400" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="3402" href="Data.Fin.Substitution.html#3360" class="Bound">ℓ₂</a><a id="3404" class="Symbol">)</a> <a id="3406" class="Symbol">:</a>
    <a id="3412" class="PrimitiveType">Set</a> <a id="3416" class="Symbol">(</a><a id="3417" href="Data.Fin.Substitution.html#3357" class="Bound">ℓ₁</a> <a id="3420" href="Agda.Primitive.html#657" class="Primitive Operator">⊔</a> <a id="3422" href="Data.Fin.Substitution.html#3360" class="Bound">ℓ₂</a><a id="3424" class="Symbol">)</a> <a id="3426" class="Keyword">where</a>
  <a id="3434" class="Keyword">field</a>
    <a id="Lift.simple"></a><a id="3444" href="Data.Fin.Substitution.html#3444" class="Field">simple</a> <a id="3451" class="Symbol">:</a> <a id="3453" href="Data.Fin.Substitution.html#1285" class="Record">Simple</a> <a id="3460" href="Data.Fin.Substitution.html#3373" class="Bound">T₁</a>
    <a id="Lift.lift"></a><a id="3467" href="Data.Fin.Substitution.html#3467" class="Field">lift</a>   <a id="3474" class="Symbol">:</a> <a id="3476" class="Symbol">∀</a> <a id="3478" class="Symbol">{</a><a id="3479" href="Data.Fin.Substitution.html#3479" class="Bound">n</a><a id="3480" class="Symbol">}</a> <a id="3482" class="Symbol">→</a> <a id="3484" href="Data.Fin.Substitution.html#3373" class="Bound">T₁</a> <a id="3487" href="Data.Fin.Substitution.html#3479" class="Bound">n</a> <a id="3489" class="Symbol">→</a> <a id="3491" href="Data.Fin.Substitution.html#3390" class="Bound">T₂</a> <a id="3494" href="Data.Fin.Substitution.html#3479" class="Bound">n</a>

  <a id="3499" class="Keyword">open</a> <a id="3504" href="Data.Fin.Substitution.html#1285" class="Module">Simple</a> <a id="3511" href="Data.Fin.Substitution.html#3444" class="Field">simple</a> <a id="3518" class="Keyword">public</a>

<a id="3526" class="Comment">-- Variable substitutions (renamings).</a>

<a id="3566" class="Keyword">module</a> <a id="VarSubst"></a><a id="3573" href="Data.Fin.Substitution.html#3573" class="Module">VarSubst</a> <a id="3582" class="Keyword">where</a>

  <a id="VarSubst.subst"></a><a id="3591" href="Data.Fin.Substitution.html#3591" class="Function">subst</a> <a id="3597" class="Symbol">:</a> <a id="3599" href="Data.Fin.Substitution.html#2787" class="Record">Subst</a> <a id="3605" href="Data.Fin.Base.html#915" class="Datatype">Fin</a>
  <a id="3611" href="Data.Fin.Substitution.html#3591" class="Function">subst</a> <a id="3617" class="Symbol">=</a> <a id="3619" class="Keyword">record</a>
    <a id="3630" class="Symbol">{</a> <a id="3632" href="Data.Fin.Substitution.html#2846" class="Field">simple</a>      <a id="3644" class="Symbol">=</a> <a id="3646" class="Keyword">record</a> <a id="3653" class="Symbol">{</a> <a id="3655" href="Data.Fin.Substitution.html#1383" class="Field">var</a> <a id="3659" class="Symbol">=</a> <a id="3661" href="Function.html#1068" class="Function">Fun.id</a><a id="3667" class="Symbol">;</a> <a id="3669" href="Data.Fin.Substitution.html#1447" class="Field">weaken</a> <a id="3676" class="Symbol">=</a> <a id="3678" href="Data.Fin.Base.html#968" class="InductiveConstructor">suc</a> <a id="3682" class="Symbol">}</a>
    <a id="3688" class="Symbol">;</a> <a id="3690" href="Data.Fin.Substitution.html#2878" class="Field">application</a> <a id="3702" class="Symbol">=</a> <a id="3704" class="Keyword">record</a> <a id="3711" class="Symbol">{</a> <a id="3713" href="Data.Fin.Substitution.html#2398" class="Field Operator">_/_</a> <a id="3717" class="Symbol">=</a> <a id="3719" href="Data.Vec.html#1343" class="Function">lookup</a> <a id="3726" class="Symbol">}</a>
    <a id="3732" class="Symbol">}</a>

  <a id="3737" class="Keyword">open</a> <a id="3742" href="Data.Fin.Substitution.html#2787" class="Module">Subst</a> <a id="3748" href="Data.Fin.Substitution.html#3591" class="Function">subst</a> <a id="3754" class="Keyword">public</a>

<a id="3762" class="Comment">-- &quot;Term&quot; substitutions.</a>

<a id="3788" class="Keyword">record</a> <a id="TermSubst"></a><a id="3795" href="Data.Fin.Substitution.html#3795" class="Record">TermSubst</a> <a id="3805" class="Symbol">(</a><a id="3806" href="Data.Fin.Substitution.html#3806" class="Bound">T</a> <a id="3808" class="Symbol">:</a> <a id="3810" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="3815" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="3817" href="Agda.Primitive.html#611" class="Primitive">L.zero</a><a id="3823" class="Symbol">)</a> <a id="3825" class="Symbol">:</a> <a id="3827" class="PrimitiveType">Set₁</a> <a id="3832" class="Keyword">where</a>
  <a id="3840" class="Keyword">field</a>
    <a id="TermSubst.var"></a><a id="3850" href="Data.Fin.Substitution.html#3850" class="Field">var</a> <a id="3854" class="Symbol">:</a> <a id="3856" class="Symbol">∀</a> <a id="3858" class="Symbol">{</a><a id="3859" href="Data.Fin.Substitution.html#3859" class="Bound">n</a><a id="3860" class="Symbol">}</a> <a id="3862" class="Symbol">→</a> <a id="3864" href="Data.Fin.Base.html#915" class="Datatype">Fin</a> <a id="3868" href="Data.Fin.Substitution.html#3859" class="Bound">n</a> <a id="3870" class="Symbol">→</a> <a id="3872" href="Data.Fin.Substitution.html#3806" class="Bound">T</a> <a id="3874" href="Data.Fin.Substitution.html#3859" class="Bound">n</a>
    <a id="TermSubst.app"></a><a id="3880" href="Data.Fin.Substitution.html#3880" class="Field">app</a> <a id="3884" class="Symbol">:</a> <a id="3886" class="Symbol">∀</a> <a id="3888" class="Symbol">{</a><a id="3889" href="Data.Fin.Substitution.html#3889" class="Bound">T′</a> <a id="3892" class="Symbol">:</a> <a id="3894" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="3899" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="3901" href="Agda.Primitive.html#611" class="Primitive">L.zero</a><a id="3907" class="Symbol">}</a> <a id="3909" class="Symbol">→</a> <a id="3911" href="Data.Fin.Substitution.html#3351" class="Record">Lift</a> <a id="3916" href="Data.Fin.Substitution.html#3889" class="Bound">T′</a> <a id="3919" href="Data.Fin.Substitution.html#3806" class="Bound">T</a> <a id="3921" class="Symbol">→</a> <a id="3923" class="Symbol">∀</a> <a id="3925" class="Symbol">{</a><a id="3926" href="Data.Fin.Substitution.html#3926" class="Bound">m</a> <a id="3928" href="Data.Fin.Substitution.html#3928" class="Bound">n</a><a id="3929" class="Symbol">}</a> <a id="3931" class="Symbol">→</a> <a id="3933" href="Data.Fin.Substitution.html#3806" class="Bound">T</a> <a id="3935" href="Data.Fin.Substitution.html#3926" class="Bound">m</a> <a id="3937" class="Symbol">→</a> <a id="3939" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="3943" href="Data.Fin.Substitution.html#3889" class="Bound">T′</a> <a id="3946" href="Data.Fin.Substitution.html#3926" class="Bound">m</a> <a id="3948" href="Data.Fin.Substitution.html#3928" class="Bound">n</a> <a id="3950" class="Symbol">→</a> <a id="3952" href="Data.Fin.Substitution.html#3806" class="Bound">T</a> <a id="3954" href="Data.Fin.Substitution.html#3928" class="Bound">n</a>

  <a id="3959" class="Keyword">module</a> <a id="Lifted"></a><a id="3966" href="Data.Fin.Substitution.html#3966" class="Module">Lifted</a> <a id="3973" class="Symbol">{</a><a id="3974" href="Data.Fin.Substitution.html#3974" class="Bound">T′</a> <a id="3977" class="Symbol">:</a> <a id="3979" href="Relation.Unary.html#582" class="Function">Pred</a> <a id="3984" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="3986" href="Agda.Primitive.html#611" class="Primitive">L.zero</a><a id="3992" class="Symbol">}</a> <a id="3994" class="Symbol">(</a><a id="3995" href="Data.Fin.Substitution.html#3995" class="Bound">lift</a> <a id="4000" class="Symbol">:</a> <a id="4002" href="Data.Fin.Substitution.html#3351" class="Record">Lift</a> <a id="4007" href="Data.Fin.Substitution.html#3974" class="Bound">T′</a> <a id="4010" href="Data.Fin.Substitution.html#3806" class="Bound">T</a><a id="4011" class="Symbol">)</a> <a id="4013" class="Keyword">where</a>
    <a id="TermSubst.Lifted.application"></a><a id="4023" href="Data.Fin.Substitution.html#4023" class="Function">application</a> <a id="4035" class="Symbol">:</a> <a id="4037" href="Data.Fin.Substitution.html#2215" class="Record">Application</a> <a id="4049" href="Data.Fin.Substitution.html#3806" class="Bound">T</a> <a id="4051" href="Data.Fin.Substitution.html#3974" class="Bound">T′</a>
    <a id="4058" href="Data.Fin.Substitution.html#4023" class="Function">application</a> <a id="4070" class="Symbol">=</a> <a id="4072" class="Keyword">record</a> <a id="4079" class="Symbol">{</a> <a id="4081" href="Data.Fin.Substitution.html#2398" class="Field Operator">_/_</a> <a id="4085" class="Symbol">=</a> <a id="4087" href="Data.Fin.Substitution.html#3880" class="Field">app</a> <a id="4091" href="Data.Fin.Substitution.html#3995" class="Bound">lift</a> <a id="4096" class="Symbol">}</a>

    <a id="4103" class="Keyword">open</a> <a id="4108" href="Data.Fin.Substitution.html#3351" class="Module">Lift</a> <a id="4113" href="Data.Fin.Substitution.html#3995" class="Bound">lift</a> <a id="4118" class="Keyword">public</a>
    <a id="4129" class="Keyword">open</a> <a id="4134" href="Data.Fin.Substitution.html#2215" class="Module">Application</a> <a id="4146" href="Data.Fin.Substitution.html#4023" class="Function">application</a> <a id="4158" class="Keyword">public</a>

  <a id="TermSubst.varLift"></a><a id="4168" href="Data.Fin.Substitution.html#4168" class="Function">varLift</a> <a id="4176" class="Symbol">:</a> <a id="4178" href="Data.Fin.Substitution.html#3351" class="Record">Lift</a> <a id="4183" href="Data.Fin.Base.html#915" class="Datatype">Fin</a> <a id="4187" href="Data.Fin.Substitution.html#3806" class="Bound">T</a>
  <a id="4191" href="Data.Fin.Substitution.html#4168" class="Function">varLift</a> <a id="4199" class="Symbol">=</a> <a id="4201" class="Keyword">record</a> <a id="4208" class="Symbol">{</a> <a id="4210" href="Data.Fin.Substitution.html#3444" class="Field">simple</a> <a id="4217" class="Symbol">=</a> <a id="4219" href="Data.Fin.Substitution.html#2846" class="Function">VarSubst.simple</a><a id="4234" class="Symbol">;</a> <a id="4236" href="Data.Fin.Substitution.html#3467" class="Field">lift</a> <a id="4241" class="Symbol">=</a> <a id="4243" href="Data.Fin.Substitution.html#3850" class="Field">var</a> <a id="4247" class="Symbol">}</a>

  <a id="4252" class="Keyword">infix</a> <a id="4258" class="Number">8</a> <a id="4260" href="Data.Fin.Substitution.html#4270" class="Function Operator">_/Var_</a>

  <a id="TermSubst._/Var_"></a><a id="4270" href="Data.Fin.Substitution.html#4270" class="Function Operator">_/Var_</a> <a id="4277" class="Symbol">:</a> <a id="4279" class="Symbol">∀</a> <a id="4281" class="Symbol">{</a><a id="4282" href="Data.Fin.Substitution.html#4282" class="Bound">m</a> <a id="4284" href="Data.Fin.Substitution.html#4284" class="Bound">n</a><a id="4285" class="Symbol">}</a> <a id="4287" class="Symbol">→</a> <a id="4289" href="Data.Fin.Substitution.html#3806" class="Bound">T</a> <a id="4291" href="Data.Fin.Substitution.html#4282" class="Bound">m</a> <a id="4293" class="Symbol">→</a> <a id="4295" href="Data.Fin.Substitution.html#1053" class="Function">Sub</a> <a id="4299" href="Data.Fin.Base.html#915" class="Datatype">Fin</a> <a id="4303" href="Data.Fin.Substitution.html#4282" class="Bound">m</a> <a id="4305" href="Data.Fin.Substitution.html#4284" class="Bound">n</a> <a id="4307" class="Symbol">→</a> <a id="4309" href="Data.Fin.Substitution.html#3806" class="Bound">T</a> <a id="4311" href="Data.Fin.Substitution.html#4284" class="Bound">n</a>
  <a id="4315" href="Data.Fin.Substitution.html#4270" class="Function Operator">_/Var_</a> <a id="4322" class="Symbol">=</a> <a id="4324" href="Data.Fin.Substitution.html#3880" class="Field">app</a> <a id="4328" href="Data.Fin.Substitution.html#4168" class="Function">varLift</a>

  <a id="TermSubst.simple"></a><a id="4339" href="Data.Fin.Substitution.html#4339" class="Function">simple</a> <a id="4346" class="Symbol">:</a> <a id="4348" href="Data.Fin.Substitution.html#1285" class="Record">Simple</a> <a id="4355" href="Data.Fin.Substitution.html#3806" class="Bound">T</a>
  <a id="4359" href="Data.Fin.Substitution.html#4339" class="Function">simple</a> <a id="4366" class="Symbol">=</a> <a id="4368" class="Keyword">record</a>
    <a id="4379" class="Symbol">{</a> <a id="4381" href="Data.Fin.Substitution.html#1383" class="Field">var</a>    <a id="4388" class="Symbol">=</a> <a id="4390" href="Data.Fin.Substitution.html#3850" class="Field">var</a>
    <a id="4398" class="Symbol">;</a> <a id="4400" href="Data.Fin.Substitution.html#1447" class="Field">weaken</a> <a id="4407" class="Symbol">=</a> <a id="4409" class="Symbol">λ</a> <a id="4411" href="Data.Fin.Substitution.html#4411" class="Bound">t</a> <a id="4413" class="Symbol">→</a> <a id="4415" href="Data.Fin.Substitution.html#4411" class="Bound">t</a> <a id="4417" href="Data.Fin.Substitution.html#4270" class="Function Operator">/Var</a> <a id="4422" href="Data.Fin.Substitution.html#2014" class="Function">VarSubst.wk</a>
    <a id="4438" class="Symbol">}</a>

  <a id="TermSubst.termLift"></a><a id="4443" href="Data.Fin.Substitution.html#4443" class="Function">termLift</a> <a id="4452" class="Symbol">:</a> <a id="4454" href="Data.Fin.Substitution.html#3351" class="Record">Lift</a> <a id="4459" href="Data.Fin.Substitution.html#3806" class="Bound">T</a> <a id="4461" href="Data.Fin.Substitution.html#3806" class="Bound">T</a>
  <a id="4465" href="Data.Fin.Substitution.html#4443" class="Function">termLift</a> <a id="4474" class="Symbol">=</a> <a id="4476" class="Keyword">record</a> <a id="4483" class="Symbol">{</a> <a id="4485" href="Data.Fin.Substitution.html#3444" class="Field">simple</a> <a id="4492" class="Symbol">=</a> <a id="4494" href="Data.Fin.Substitution.html#4339" class="Function">simple</a><a id="4500" class="Symbol">;</a> <a id="4502" href="Data.Fin.Substitution.html#3467" class="Field">lift</a> <a id="4507" class="Symbol">=</a> <a id="4509" href="Function.html#1068" class="Function">Fun.id</a> <a id="4516" class="Symbol">}</a>

  <a id="TermSubst.subst"></a><a id="4521" href="Data.Fin.Substitution.html#4521" class="Function">subst</a> <a id="4527" class="Symbol">:</a> <a id="4529" href="Data.Fin.Substitution.html#2787" class="Record">Subst</a> <a id="4535" href="Data.Fin.Substitution.html#3806" class="Bound">T</a>
  <a id="4539" href="Data.Fin.Substitution.html#4521" class="Function">subst</a> <a id="4545" class="Symbol">=</a> <a id="4547" class="Keyword">record</a>
    <a id="4558" class="Symbol">{</a> <a id="4560" href="Data.Fin.Substitution.html#2846" class="Field">simple</a>      <a id="4572" class="Symbol">=</a> <a id="4574" href="Data.Fin.Substitution.html#4339" class="Function">simple</a>
    <a id="4585" class="Symbol">;</a> <a id="4587" href="Data.Fin.Substitution.html#2878" class="Field">application</a> <a id="4599" class="Symbol">=</a> <a id="4601" href="Data.Fin.Substitution.html#4023" class="Function">Lifted.application</a> <a id="4620" href="Data.Fin.Substitution.html#4443" class="Function">termLift</a>
    <a id="4633" class="Symbol">}</a>

  <a id="4638" class="Keyword">open</a> <a id="4643" href="Data.Fin.Substitution.html#2787" class="Module">Subst</a> <a id="4649" href="Data.Fin.Substitution.html#4521" class="Function">subst</a> <a id="4655" class="Keyword">public</a> <a id="4662" class="Keyword">hiding</a> <a id="4669" class="Symbol">(</a>var<a id="4673" class="Symbol">;</a> simple<a id="4681" class="Symbol">)</a>
</pre></body></html>