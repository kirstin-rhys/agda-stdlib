<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Star.BoundedVec</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Bounded vectors (inefficient implementation)</a>
<a id="154" class="Comment">------------------------------------------------------------------------</a>

<a id="228" class="Comment">-- Vectors of a specified maximum length.</a>

<a id="271" class="Keyword">module</a> <a id="278" href="Data.Star.BoundedVec.html" class="Module">Data.Star.BoundedVec</a> <a id="299" class="Keyword">where</a>

<a id="306" class="Keyword">import</a> <a id="313" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="329" class="Symbol">as</a> <a id="332" class="Module">Maybe</a>
<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="Data.Star.Nat.html" class="Module">Data.Star.Nat</a>
<a id="364" class="Keyword">open</a> <a id="369" class="Keyword">import</a> <a id="376" href="Data.Star.Decoration.html" class="Module">Data.Star.Decoration</a>
<a id="397" class="Keyword">open</a> <a id="402" class="Keyword">import</a> <a id="409" href="Data.Star.Pointer.html" class="Module">Data.Star.Pointer</a>
<a id="427" class="Keyword">open</a> <a id="432" class="Keyword">import</a> <a id="439" href="Data.Star.List.html" class="Module">Data.Star.List</a> <a id="454" class="Keyword">using</a> <a id="460" class="Symbol">(</a><a id="461" href="Data.Star.List.html#524" class="Function">List</a><a id="465" class="Symbol">)</a>
<a id="467" class="Keyword">open</a> <a id="472" class="Keyword">import</a> <a id="479" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="489" class="Keyword">open</a> <a id="494" class="Keyword">import</a> <a id="501" href="Function.html" class="Module">Function</a>
<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="538" class="Keyword">open</a> <a id="543" class="Keyword">import</a> <a id="550" href="Relation.Binary.Consequences.html" class="Module">Relation.Binary.Consequences</a>
<a id="579" class="Keyword">open</a> <a id="584" class="Keyword">import</a> <a id="591" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html" class="Module">Relation.Binary.Construct.Closure.ReflexiveTransitive</a>

<a id="646" class="Comment">------------------------------------------------------------------------</a>
<a id="719" class="Comment">-- The type</a>

<a id="732" class="Comment">-- Finite sets decorated with elements (note the use of suc).</a>

<a id="BoundedVec"></a><a id="795" href="Data.Star.BoundedVec.html#795" class="Function">BoundedVec</a> <a id="806" class="Symbol">:</a> <a id="808" class="PrimitiveType">Set</a> <a id="812" class="Symbol">→</a> <a id="814" href="Data.Star.Nat.html#499" class="Function">ℕ</a> <a id="816" class="Symbol">→</a> <a id="818" class="PrimitiveType">Set</a>
<a id="822" href="Data.Star.BoundedVec.html#795" class="Function">BoundedVec</a> <a id="833" href="Data.Star.BoundedVec.html#833" class="Bound">a</a> <a id="835" href="Data.Star.BoundedVec.html#835" class="Bound">n</a> <a id="837" class="Symbol">=</a> <a id="839" href="Data.Star.Pointer.html#1279" class="Function">Any</a> <a id="843" class="Symbol">(λ</a> <a id="846" href="Data.Star.BoundedVec.html#846" class="Bound">_</a> <a id="848" class="Symbol">→</a> <a id="850" href="Data.Star.BoundedVec.html#833" class="Bound">a</a><a id="851" class="Symbol">)</a> <a id="853" class="Symbol">(λ</a> <a id="856" href="Data.Star.BoundedVec.html#856" class="Bound">_</a> <a id="858" class="Symbol">→</a> <a id="860" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a><a id="861" class="Symbol">)</a> <a id="863" class="Symbol">(</a><a id="864" href="Data.Star.Nat.html#573" class="Function">suc</a> <a id="868" href="Data.Star.BoundedVec.html#835" class="Bound">n</a><a id="869" class="Symbol">)</a>

<a id="[]"></a><a id="872" href="Data.Star.BoundedVec.html#872" class="Function">[]</a> <a id="875" class="Symbol">:</a> <a id="877" class="Symbol">∀</a> <a id="879" class="Symbol">{</a><a id="880" href="Data.Star.BoundedVec.html#880" class="Bound">a</a> <a id="882" href="Data.Star.BoundedVec.html#882" class="Bound">n</a><a id="883" class="Symbol">}</a> <a id="885" class="Symbol">→</a> <a id="887" href="Data.Star.BoundedVec.html#795" class="Function">BoundedVec</a> <a id="898" href="Data.Star.BoundedVec.html#880" class="Bound">a</a> <a id="900" href="Data.Star.BoundedVec.html#882" class="Bound">n</a>
<a id="902" href="Data.Star.BoundedVec.html#872" class="Function">[]</a> <a id="905" class="Symbol">=</a> <a id="907" href="Data.Star.Pointer.html#1533" class="Function">this</a> <a id="912" href="Agda.Builtin.Unit.html#106" class="InductiveConstructor">tt</a>

<a id="916" class="Keyword">infixr</a> <a id="923" class="Number">5</a> <a id="925" href="Data.Star.BoundedVec.html#930" class="Function Operator">_∷_</a>

<a id="_∷_"></a><a id="930" href="Data.Star.BoundedVec.html#930" class="Function Operator">_∷_</a> <a id="934" class="Symbol">:</a> <a id="936" class="Symbol">∀</a> <a id="938" class="Symbol">{</a><a id="939" href="Data.Star.BoundedVec.html#939" class="Bound">a</a> <a id="941" href="Data.Star.BoundedVec.html#941" class="Bound">n</a><a id="942" class="Symbol">}</a> <a id="944" class="Symbol">→</a> <a id="946" href="Data.Star.BoundedVec.html#939" class="Bound">a</a> <a id="948" class="Symbol">→</a> <a id="950" href="Data.Star.BoundedVec.html#795" class="Function">BoundedVec</a> <a id="961" href="Data.Star.BoundedVec.html#939" class="Bound">a</a> <a id="963" href="Data.Star.BoundedVec.html#941" class="Bound">n</a> <a id="965" class="Symbol">→</a> <a id="967" href="Data.Star.BoundedVec.html#795" class="Function">BoundedVec</a> <a id="978" href="Data.Star.BoundedVec.html#939" class="Bound">a</a> <a id="980" class="Symbol">(</a><a id="981" href="Data.Star.Nat.html#573" class="Function">suc</a> <a id="985" href="Data.Star.BoundedVec.html#941" class="Bound">n</a><a id="986" class="Symbol">)</a>
<a id="988" href="Data.Star.BoundedVec.html#930" class="Function Operator">_∷_</a> <a id="992" class="Symbol">=</a> <a id="994" href="Data.Star.Pointer.html#1639" class="Function">that</a>

<a id="1000" class="Comment">------------------------------------------------------------------------</a>
<a id="1073" class="Comment">-- Increasing the bound</a>

<a id="1098" class="Comment">-- Note that this operation is linear in the length of the list.</a>

<a id="↑"></a><a id="1164" href="Data.Star.BoundedVec.html#1164" class="Function">↑</a> <a id="1166" class="Symbol">:</a> <a id="1168" class="Symbol">∀</a> <a id="1170" class="Symbol">{</a><a id="1171" href="Data.Star.BoundedVec.html#1171" class="Bound">a</a> <a id="1173" href="Data.Star.BoundedVec.html#1173" class="Bound">n</a><a id="1174" class="Symbol">}</a> <a id="1176" class="Symbol">→</a> <a id="1178" href="Data.Star.BoundedVec.html#795" class="Function">BoundedVec</a> <a id="1189" href="Data.Star.BoundedVec.html#1171" class="Bound">a</a> <a id="1191" href="Data.Star.BoundedVec.html#1173" class="Bound">n</a> <a id="1193" class="Symbol">→</a> <a id="1195" href="Data.Star.BoundedVec.html#795" class="Function">BoundedVec</a> <a id="1206" href="Data.Star.BoundedVec.html#1171" class="Bound">a</a> <a id="1208" class="Symbol">(</a><a id="1209" href="Data.Star.Nat.html#573" class="Function">suc</a> <a id="1213" href="Data.Star.BoundedVec.html#1173" class="Bound">n</a><a id="1214" class="Symbol">)</a>
<a id="1216" href="Data.Star.BoundedVec.html#1164" class="Function">↑</a> <a id="1218" class="Symbol">{</a><a id="1219" href="Data.Star.BoundedVec.html#1219" class="Bound">a</a><a id="1220" class="Symbol">}</a> <a id="1222" class="Symbol">=</a> <a id="1224" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1489" class="Function">gmap</a> <a id="1229" href="Data.Star.BoundedVec.html#1248" class="Function">inc</a> <a id="1233" href="Data.Star.BoundedVec.html#1286" class="Function">lift</a>
  <a id="1240" class="Keyword">where</a>
  <a id="1248" href="Data.Star.BoundedVec.html#1248" class="Function">inc</a> <a id="1252" class="Symbol">=</a> <a id="1254" href="Data.Maybe.Base.html#2071" class="Function">Maybe.map</a> <a id="1264" class="Symbol">(</a><a id="1265" href="Relation.Binary.Consequences.html#4810" class="Function">map-NonEmpty</a> <a id="1278" href="Data.Star.Nat.html#573" class="Function">suc</a><a id="1281" class="Symbol">)</a>

  <a id="1286" href="Data.Star.BoundedVec.html#1286" class="Function">lift</a> <a id="1291" class="Symbol">:</a> <a id="1293" href="Data.Star.Pointer.html#621" class="Datatype">Pointer</a> <a id="1301" class="Symbol">(λ</a> <a id="1304" href="Data.Star.BoundedVec.html#1304" class="Bound">_</a> <a id="1306" class="Symbol">→</a> <a id="1308" href="Data.Star.BoundedVec.html#1219" class="Bound">a</a><a id="1309" class="Symbol">)</a> <a id="1311" class="Symbol">(λ</a> <a id="1314" href="Data.Star.BoundedVec.html#1314" class="Bound">_</a> <a id="1316" class="Symbol">→</a> <a id="1318" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a><a id="1319" class="Symbol">)</a> <a id="1321" href="Relation.Binary.Core.html#1352" class="Function Operator">=[</a> <a id="1324" href="Data.Star.BoundedVec.html#1248" class="Function">inc</a> <a id="1328" href="Relation.Binary.Core.html#1352" class="Function Operator">]⇒</a>
         <a id="1340" href="Data.Star.Pointer.html#621" class="Datatype">Pointer</a> <a id="1348" class="Symbol">(λ</a> <a id="1351" href="Data.Star.BoundedVec.html#1351" class="Bound">_</a> <a id="1353" class="Symbol">→</a> <a id="1355" href="Data.Star.BoundedVec.html#1219" class="Bound">a</a><a id="1356" class="Symbol">)</a> <a id="1358" class="Symbol">(λ</a> <a id="1361" href="Data.Star.BoundedVec.html#1361" class="Bound">_</a> <a id="1363" class="Symbol">→</a> <a id="1365" href="Agda.Builtin.Unit.html#69" class="Record">⊤</a><a id="1366" class="Symbol">)</a>
  <a id="1370" href="Data.Star.BoundedVec.html#1286" class="Function">lift</a> <a id="1375" class="Symbol">(</a><a id="1376" href="Data.Star.Pointer.html#765" class="InductiveConstructor">step</a> <a id="1381" href="Data.Star.BoundedVec.html#1381" class="Bound">x</a><a id="1382" class="Symbol">)</a> <a id="1384" class="Symbol">=</a> <a id="1386" href="Data.Star.Pointer.html#765" class="InductiveConstructor">step</a> <a id="1391" href="Data.Star.BoundedVec.html#1381" class="Bound">x</a>
  <a id="1395" href="Data.Star.BoundedVec.html#1286" class="Function">lift</a> <a id="1400" class="Symbol">(</a><a id="1401" href="Data.Star.Pointer.html#928" class="InductiveConstructor">done</a> <a id="1406" class="Symbol">_)</a> <a id="1409" class="Symbol">=</a> <a id="1411" href="Data.Star.Pointer.html#928" class="InductiveConstructor">done</a> <a id="1416" class="Symbol">_</a>

<a id="1419" class="Comment">------------------------------------------------------------------------</a>
<a id="1492" class="Comment">-- Conversions</a>

<a id="fromList"></a><a id="1508" href="Data.Star.BoundedVec.html#1508" class="Function">fromList</a> <a id="1517" class="Symbol">:</a> <a id="1519" class="Symbol">∀</a> <a id="1521" class="Symbol">{</a><a id="1522" href="Data.Star.BoundedVec.html#1522" class="Bound">a</a><a id="1523" class="Symbol">}</a> <a id="1525" class="Symbol">→</a> <a id="1527" class="Symbol">(</a><a id="1528" href="Data.Star.BoundedVec.html#1528" class="Bound">xs</a> <a id="1531" class="Symbol">:</a> <a id="1533" href="Data.Star.List.html#524" class="Function">List</a> <a id="1538" href="Data.Star.BoundedVec.html#1522" class="Bound">a</a><a id="1539" class="Symbol">)</a> <a id="1541" class="Symbol">→</a> <a id="1543" href="Data.Star.BoundedVec.html#795" class="Function">BoundedVec</a> <a id="1554" href="Data.Star.BoundedVec.html#1522" class="Bound">a</a> <a id="1556" class="Symbol">(</a><a id="1557" href="Data.Star.Nat.html#629" class="Function">length</a> <a id="1564" href="Data.Star.BoundedVec.html#1528" class="Bound">xs</a><a id="1566" class="Symbol">)</a>
<a id="1568" href="Data.Star.BoundedVec.html#1508" class="Function">fromList</a> <a id="1577" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#510" class="InductiveConstructor">ε</a>        <a id="1586" class="Symbol">=</a> <a id="1588" href="Data.Star.BoundedVec.html#872" class="Function">[]</a>
<a id="1591" href="Data.Star.BoundedVec.html#1508" class="Function">fromList</a> <a id="1600" class="Symbol">(</a><a id="1601" href="Data.Star.BoundedVec.html#1601" class="Bound">x</a> <a id="1603" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#537" class="InductiveConstructor Operator">◅</a> <a id="1605" href="Data.Star.BoundedVec.html#1605" class="Bound">xs</a><a id="1607" class="Symbol">)</a> <a id="1609" class="Symbol">=</a> <a id="1611" href="Data.Star.BoundedVec.html#1601" class="Bound">x</a> <a id="1613" href="Data.Star.BoundedVec.html#930" class="Function Operator">∷</a> <a id="1615" href="Data.Star.BoundedVec.html#1508" class="Function">fromList</a> <a id="1624" href="Data.Star.BoundedVec.html#1605" class="Bound">xs</a>

<a id="toList"></a><a id="1628" href="Data.Star.BoundedVec.html#1628" class="Function">toList</a> <a id="1635" class="Symbol">:</a> <a id="1637" class="Symbol">∀</a> <a id="1639" class="Symbol">{</a><a id="1640" href="Data.Star.BoundedVec.html#1640" class="Bound">a</a> <a id="1642" href="Data.Star.BoundedVec.html#1642" class="Bound">n</a><a id="1643" class="Symbol">}</a> <a id="1645" class="Symbol">→</a> <a id="1647" href="Data.Star.BoundedVec.html#795" class="Function">BoundedVec</a> <a id="1658" href="Data.Star.BoundedVec.html#1640" class="Bound">a</a> <a id="1660" href="Data.Star.BoundedVec.html#1642" class="Bound">n</a> <a id="1662" class="Symbol">→</a> <a id="1664" href="Data.Star.List.html#524" class="Function">List</a> <a id="1669" href="Data.Star.BoundedVec.html#1640" class="Bound">a</a>
<a id="1671" href="Data.Star.BoundedVec.html#1628" class="Function">toList</a> <a id="1678" href="Data.Star.BoundedVec.html#1678" class="Bound">xs</a> <a id="1681" class="Symbol">=</a> <a id="1683" href="Relation.Binary.Construct.Closure.ReflexiveTransitive.html#1489" class="Function">gmap</a> <a id="1688" class="Symbol">(</a><a id="1689" href="Function.html#1109" class="Function">const</a> <a id="1695" href="Agda.Builtin.Unit.html#106" class="InductiveConstructor">tt</a><a id="1697" class="Symbol">)</a> <a id="1699" href="Data.Star.Decoration.html#1270" class="Function">decoration</a> <a id="1710" class="Symbol">(</a><a id="1711" href="Data.Star.Pointer.html#2893" class="Function">init</a> <a id="1716" href="Data.Star.BoundedVec.html#1678" class="Bound">xs</a><a id="1718" class="Symbol">)</a>
</pre></body></html>